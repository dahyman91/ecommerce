(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{258:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(39),i=n.n(a),s=n(26),o=n(14),u=n(11),l=n(346),d=n(348),j=n(332),p=n(340),b=n(352),h=n(18),O=n(347),x=n(354),m=n(107),f=n.n(m),g=n(351),v=n(353),y=n(172),C=n(350),w=n(1);function k(){return Object(w.jsxs)(g.a,{variant:"body2",color:"text.secondary",align:"center",children:["No Copyright \xa9 ",Object(w.jsx)(b.a,{color:"inherit",href:"https://www.linkedin.com/in/dan-hyman-dev/",children:"Dan Hyman"})," ",(new Date).getFullYear()]})}var S=Object(y.a)();function I(e){var t=e.setCurrentUser,n=(e.currentUser,Object(h.g)()),c=Object(r.useState)(""),a=Object(u.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(""),m=Object(u.a)(o,2),y=m[0],I=m[1],_=Object(r.useState)(""),U=Object(u.a)(_,2),T=U[0],N=U[1],P=Object(r.useState)(""),D=Object(u.a)(P,2),A=D[0],E=D[1],F=Object(r.useState)(""),z=Object(u.a)(F,2),W=(z[0],z[1]);return Object(w.jsx)(C.a,{theme:S,children:Object(w.jsxs)(v.a,{component:"main",maxWidth:"xs",children:[Object(w.jsx)(j.a,{}),Object(w.jsxs)(x.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(w.jsx)(l.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(w.jsx)(f.a,{})}),Object(w.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(w.jsxs)(x.a,{component:"form",noValidate:!0,onSubmit:function(e){e.preventDefault(),fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:i,last_name:y,email:T,password:A})}).then((function(e){e.ok?(console.log(e),t({first_name:i,last_name:y,email:T,password:A}),n.push("/products")):e.json().then((function(e){return W(Object.entries(e.error).flat())}))}))},sx:{mt:3},children:[Object(w.jsxs)(O.a,{container:!0,spacing:2,children:[Object(w.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(p.a,{onChange:function(e){return s(e.target.value)},value:i,autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),Object(w.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(p.a,{onChange:function(e){return I(e.target.value)},value:y,required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name"})}),Object(w.jsx)(O.a,{item:!0,xs:12,children:Object(w.jsx)(p.a,{onChange:function(e){return N(e.target.value)},value:T,required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(w.jsx)(O.a,{item:!0,xs:12,children:Object(w.jsx)(p.a,{onChange:function(e){return E(e.target.value)},value:A,required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})})]}),Object(w.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(w.jsx)(O.a,{container:!0,justifyContent:"center",children:Object(w.jsx)(O.a,{item:!0,children:Object(w.jsx)(b.a,{href:"/log-in",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(w.jsx)(k,{sx:{mt:5}})]})})}var _=n(28),U=n(355);function T(e){return Object(w.jsxs)(g.a,Object(_.a)(Object(_.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["No Copyright \xa9 ",Object(w.jsx)(b.a,{color:"inherit",href:"https://www.linkedin.com/in/dan-hyman-dev/",children:"Dan Hyman"})," ",(new Date).getFullYear()]}))}var N=Object(y.a)();function P(e){var t=e.setCurrentUser,n=(e.currentUser,Object(h.g)()),c=Object(r.useState)(""),a=Object(u.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(""),m=Object(u.a)(o,2),v=m[0],y=m[1],k=Object(r.useState)([]),S=Object(u.a)(k,2),I=S[0],_=(S[1],Object(r.useState)(!1)),P=Object(u.a)(_,2),D=(P[0],P[1]);console.log(I);return Object(w.jsx)(C.a,{theme:N,children:Object(w.jsxs)(O.a,{container:!0,component:"main",sx:{height:"100vh"},children:[Object(w.jsx)(j.a,{}),Object(w.jsx)(O.a,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://source.unsplash.com/random/?shoe)",backgroundRepeat:"no-repeat",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[50]:e.palette.grey[900]},backgroundSize:"cover",backgroundPosition:"center"}}),Object(w.jsx)(O.a,{item:!0,xs:12,sm:8,md:5,component:U.a,elevation:6,square:!0,children:Object(w.jsxs)(x.a,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(w.jsx)(l.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(w.jsx)(f.a,{})}),Object(w.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(w.jsxs)(x.a,{component:"form",noValidate:!0,onSubmit:function(e){e.preventDefault(),D(!0),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:v})}).then((function(e){D(!1),e.ok?e.json().then((function(e){t(e),n.push("/products")})):e.json().then((function(e){return console.log(e.errors)}))}))},sx:{mt:1},children:[Object(w.jsx)(p.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",onChange:function(e){return s(e.target.value)},value:i,name:"email",autoComplete:"email",autoFocus:!0}),Object(w.jsx)(p.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:v,onChange:function(e){return y(e.target.value)},autoComplete:"current-password"}),Object(w.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(w.jsx)(O.a,{container:!0,justifyContent:"center",children:Object(w.jsx)(O.a,{item:!0,children:Object(w.jsx)(b.a,{href:"/sign-up",variant:"body2",children:"Don't have an account? Sign Up"})})}),Object(w.jsx)(T,{sx:{mt:5}})]})]})})]})})}var D=n(3),A=n(5),E=n(337),F=n(338),z=n(345),W=n(165),q=n.n(W),B=n(164),L=n.n(B),R=n(161),J=n.n(R),M=n(162),Y=n.n(M),$=n(163),H=[{id:1,title:"Huarache",subtitle:"Gripp",image:"https://firebasestorage.googleapis.com/v0/b/mui-treasury.appspot.com/o/public%2Fshoes%2Fair-huarache-gripp.png?alt=media"},{id:2,title:"Air Max",subtitle:"270 P",image:"https://firebasestorage.googleapis.com/v0/b/mui-treasury.appspot.com/o/public%2Fshoes%2Fair-max-270.png?alt=media"},{id:3,title:"Air Max",subtitle:"Deluxe",image:"https://firebasestorage.googleapis.com/v0/b/mui-treasury.appspot.com/o/public%2Fshoes%2Fair-max-deluxe.png?alt=media"}],G=Object(E.a)((function(e){var t,n,r,c,a=e.palette,i=e.breakpoints,s=e.spacing;return{root:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -40%)",width:"70vw"},slide:(t={perspective:1e3,overflow:"hidden",position:"relative",paddingTop:s(8)},Object(D.a)(t,i.up("sm"),{paddingTop:s(10)}),Object(D.a)(t,i.up("md"),{paddingTop:s(14)}),t),imageContainer:{display:"block",position:"relative",zIndex:2,paddingBottom:"56.25%"},image:Object(D.a)({display:"block",position:"absolute",zIndex:10,width:"100%",height:"100%",objectFit:"cover",marginLeft:"12%"},i.up("sm"),{marginLeft:"4%"}),arrow:Object(D.a)({display:"none",position:"absolute",top:"50%",transform:"translateY(-50%)"},i.up("sm"),{display:"inline-flex"}),arrowLeft:Object(D.a)({left:0},i.up("lg"),{left:-64}),arrowRight:Object(D.a)({right:0},i.up("lg"),{right:-64}),text:(n={fontFamily:"Poppins, san-serif",fontWeight:900,position:"absolute",color:a.common.white,padding:"0 8px",transform:"rotateY(45deg)",lineHeight:1.2},Object(D.a)(n,i.up("sm"),{padding:"0 16px"}),Object(D.a)(n,i.up("md"),{padding:"0 24px"}),n),title:(r={top:20,left:"20%",height:"40%",fontSize:400,zIndex:1,background:"linear-gradient(0deg, rgba(255,255,255,0) 0%, #9c9c9c 100%)"},Object(D.a)(r,i.up("sm"),{top:40,fontSize:72}),Object(D.a)(r,i.up("md"),{top:52,fontSize:72}),r),subtitle:(c={top:60,left:"0%",height:"52%",fontSize:56,zIndex:2,background:"linear-gradient(0deg, rgba(255,255,255,0) 0%, #888888 100%)"},Object(D.a)(c,i.up("sm"),{top:112,left:"6%",fontSize:96}),Object(D.a)(c,i.up("md"),{top:128,fontSize:104}),c),indicatorContainer:{textAlign:"center"}}})),V=function(){var e=G();console.log(e);var t=Object($.useArrowDarkButtonStyles)();console.log(t);var n=function(e,t){var n=e-t;return Math.abs(n)>1?{}:{transform:"rotateY(".concat(45*(1-n),"deg)")}};return Object(w.jsx)("div",{className:e.root,children:Object(w.jsx)(J.a,{renderElements:function(n){var r=n.index,c=n.onChangeIndex;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(z.a,{className:Object(A.default)(e.arrow,e.arrowLeft),classes:t,disabled:0===r,onClick:function(){return c(r-1)},children:Object(w.jsx)(L.a,{})}),Object(w.jsx)(z.a,{className:Object(A.default)(e.arrow,e.arrowRight),classes:t,disabled:r===H.length-1,onClick:function(){return c(r+1)},children:Object(w.jsx)(q.a,{})}),Object(w.jsx)("div",{className:e.indicatorContainer,children:H.map((function(e,t){var n=e.id;return Object(w.jsx)(Y.a,{active:t===r,onClick:function(){return c(t)}},n)}))})]})},children:function(t){var r=t.injectStyle,c=t.fineIndex;return H.map((function(t,a){var i=t.id,s=t.title,o=t.subtitle,u=t.image;return Object(w.jsxs)("div",{className:e.slide,children:[Object(w.jsx)(F.a,{noWrap:!0,className:Object(A.default)(e.text,e.title),style:Object(_.a)(Object(_.a)({},r(a,60)),n(a,c)),children:s}),Object(w.jsx)(F.a,{noWrap:!0,className:Object(A.default)(e.text,e.subtitle),style:Object(_.a)(Object(_.a)({},r(a,40)),n(a,c)),children:o}),Object(w.jsx)("div",{className:e.imageContainer,children:Object(w.jsx)("img",{className:e.image,src:u,alt:"slide"})})]},i)}))}})})};var K=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(V,{})})},Q=n(90),X=n.p+"static/media/photo.c791112d.jpeg",Z=n(343),ee={fontFamily:"sans-serif",textAlign:"center",marginTop:"15vh",width:"100%",marginLeft:"15vw",display:"flex"},te={background:"white",borderRadius:"10px",position:"absolute",top:"70%",left:"50%",transform:"translate(-50%,-50%)"};var ne=function(e){var t=e.currentUser,n=e.updateCart,c=e.setCartItems,a=(e.products,e.users),i=Object(h.h)().product,s=Object(r.useState)({}),o=Object(u.a)(s,2),l=o[0],j=o[1];function p(e){var t;return null===(t=(a.length&&a.filter((function(t){return e===t.id})))[0])||void 0===t?void 0:t.first_name}return Object(r.useEffect)((function(){fetch("/api/products/".concat(i)).then((function(e){return e.json()})).then((function(e){return j(e)}))}),[i]),Object(r.useEffect)((function(){l&&fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return c(e.product_instances)}))}))}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:Object(w.jsxs)("div",{style:ee,children:[Object(w.jsx)(Q.Parallax,{bgImage:l.primary_image,strength:-200,style:{borderRadius:"10%"},children:Object(w.jsx)("div",{style:{height:500,width:"30vw"},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:l.name}),Object(w.jsxs)(d.a,{onClick:function(){return function(){var e={user_id:t.id,product_id:l.id,quantity:1};fetch("/api/product_instances",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(){return n(e)}))}()},style:te,variant:"outlined",children:["Add ",l.name," to Cart"]})]})})}),Object(w.jsxs)("div",{style:{marginLeft:"10vw",marginTop:"10%",width:"20vw"},children:[Object(w.jsx)("h2",{children:l.name}),l.average_review>0?Object(w.jsx)(Z.a,{name:"simple-controlled",precision:.5,value:l.average_review,readOnly:!0}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Z.a,{value:0,readOnly:!0})," ",Object(w.jsx)("p",{children:"No Reviews Yet"})]}),Object(w.jsx)("p",{style:{marginTop:"30px"},children:"Description:"}),Object(w.jsx)("p",{style:{},children:l.description}),Object(w.jsx)("p",{style:{marginTop:"10px"},children:"Price:"}),Object(w.jsxs)("p",{style:{},children:["$",l.price]})]})]})}),Object(w.jsx)("div",{children:Object(w.jsx)("div",{style:{width:"100vw",marginTop:"5vh"},children:l.reviews&&l.reviews.map((function(e){return console.log(p(e.user_id)),Object(w.jsxs)("div",{style:{height:"5vh",width:"80vw",display:"flex",margin:"auto",justifyContent:"center",alignItems:"center"},children:[Object(w.jsx)("p",{style:{},children:p(e.user_id)}),Object(w.jsx)(Z.a,{name:"simple-controlled",precision:.5,value:e.rating,readOnly:!0}),e.content?Object(w.jsx)("p",{children:"review.content"}):Object(w.jsx)("p",{})]})}))})}),Object(w.jsxs)("div",{style:{fontFamily:"sans-serif",textAlign:"center",marginTop:"10vh",width:"auto",height:"100vh"},children:[Object(w.jsx)(Q.Parallax,{bgImage:[X],strength:400,renderLayer:function(e){return Object(w.jsxs)("div",{style:{width:"100%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:"1"},children:[Object(w.jsx)(d.a,{href:"/products",style:te,children:"Back To Store"}),Object(w.jsx)("div",{style:{position:"absolute",background:"rgba(255, 125, 0, ".concat(1.2*e,")"),left:"50%",top:"50%",borderRadius:"50%",transform:"translate(-50%,-50%)",width:300,height:300,zIndex:"-1"}})]})},children:Object(w.jsx)("div",{style:{height:500}})}),Object(w.jsx)(Q.Parallax,{strength:100,children:Object(w.jsx)(Q.Background,{className:"custom-bg",children:Object(w.jsx)("div",{style:{height:2e3,width:2e3,backgroundImage:"url('https://i.imgur.com/8CV5WAB.png')"}})})})]})]})},re=n(363),ce=n(366),ae=n(365),ie=n(364),se=n(367);function oe(e){var t=e.product,n=e.currentUser,c=e.updateCart,a=Object(r.useState)(parseFloat(t.average_review)),i=Object(u.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(!1),j=Object(u.a)(l,2),p=(j[0],j[1]);function h(e,t){return e.length<=t?e:e.slice(0,t)+"..."}return Object(w.jsxs)(re.a,{sx:{maxWidth:345},children:[Object(w.jsx)(ie.a,{children:Object(w.jsxs)(b.a,{href:"/products/".concat(t.id),style:{textDecoration:"none"},variant:"body2",children:[Object(w.jsx)(ae.a,{component:"img",height:"140",image:null===t||void 0===t?void 0:t.primary_image,alt:"green iguana"}),Object(w.jsxs)(ce.a,{style:{textAlign:"center"},children:[Object(w.jsx)(Z.a,{name:"simple-controlled",precision:.5,value:s,onChange:function(e){return function(e,r){var c={user_id:n.id,product_id:t.id,rating:parseFloat(e.target.value),content:""};o(e.target.value),fetch("/api/reviews",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(c)}).then(p(!0))}(e)}}),Object(w.jsx)(g.a,{gutterBottom:!0,variant:"h5",component:"div",children:h(t.name,19)}),Object(w.jsxs)(g.a,{variant:"body2",color:"text.secondary",children:["Category: ",t.category]}),Object(w.jsx)(g.a,{variant:"body2",color:"text.secondary",children:h(t.description,50)}),Object(w.jsxs)(g.a,{variant:"h5",textAlign:"center",color:"text.secondary",children:["$",t.price]})]})]})}),Object(w.jsxs)(se.a,{style:{justifyContent:"space-around"},children:[Object(w.jsx)(d.a,{onClick:function(){return function(){var e={user_id:n.id,product_id:t.id,quantity:1};fetch("/api/product_instances",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(){return c(e)}))}()},size:"small",color:"primary",children:"Add To Cart"}),Object(w.jsx)(d.a,{href:"/products/".concat(t.id),size:"small",color:"primary",children:"Learn More"})]})]})}var ue=function(e){var t,n,c,a,i=e.currentUser,s=e.products,o=e.setProducts,l=e.setCartItems,j=e.cartItems,p=e.updateCart,b=Object(r.useState)("no"),h=Object(u.a)(b,2),O=h[0],x=h[1],m=Object(r.useState)("no"),f=Object(u.a)(m,2),g=f[0],v=f[1],y=Object(r.useState)("no"),C=Object(u.a)(y,2),k=C[0],S=C[1],I=Object(r.useState)("no"),_=Object(u.a)(I,2),U=_[0],T=_[1];return Object(r.useEffect)((function(){i&&s&&fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return l(e.product_instances)}))}))}),[]),t="no"===O?"":"down"===O?"\u2b07\ufe0f":"\u2b06\ufe0f",n="no"===g?"":"down"===g?"\u2b07\ufe0f":"\u2b06\ufe0f",c="no"===k?"":"down"===k?"\u2b07\ufe0f":"\u2b06\ufe0f",a="no"===U?"":"down"===U?"\u2b07\ufe0f":"\u2b06\ufe0f",Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{style:{height:"90px"}}),Object(w.jsxs)("div",{className:"btnsContainer",style:{height:"40px",display:"flex",justifyContent:"space-around",marginBottom:"30px"},children:[Object(w.jsxs)(d.a,{onClick:function(){if("no"===O){var e=s.sort((function(e,t){return e.price-t.price}));o(e),x("down"),v("no"),S("no")}else if("down"===O){var t=s.sort((function(e,t){return t.price-e.price}));o(t),x("up"),v("no"),S("no")}else fetch("/api/products").then((function(e){return e.json()})).then((function(e){return o(e)})),x("no"),v("no"),S("no")},variant:"outlined",children:["Sort By Price ",t]}),Object(w.jsxs)(d.a,{onClick:function(){if("no"===g){var e=s.sort((function(e,t){return t.name.localeCompare(e.name)}));o(e),v("down"),x("no"),S("no")}else if("down"===g){var t=s.sort((function(e,t){return e.name.localeCompare(t.name)}));o(t),v("up"),x("no"),S("no")}else fetch("/api/products").then((function(e){return e.json()})).then((function(e){return o(e)})),v("no"),x("no"),S("no")},variant:"outlined",children:["Sort By Name ",n]}),Object(w.jsxs)(d.a,{onClick:function(){if("no"===k){var e=s.sort((function(e,t){return t.category.localeCompare(e.category)}));o(e),v("no"),x("no"),S("down")}else if("down"===k){var t=s.sort((function(e,t){return e.category.localeCompare(t.category)}));o(t),v("no"),x("no"),S("up")}else fetch("/api/products").then((function(e){return e.json()})).then((function(e){return o(e)})),v("no"),x("no"),S("no")},variant:"outlined",children:["Sort By Category ",c]}),Object(w.jsxs)(d.a,{onClick:function(){if("no"===U){var e=s.sort((function(e,t){return t.average_review-e.average_review}));o(e),T("down"),v("no"),x("no"),S("no")}else if("down"===U){var t=s.sort((function(e,t){return e.average_review-t.average_review}));o(t),T("up"),v("no"),S("no"),x("no")}else fetch("/api/products").then((function(e){return e.json()})).then((function(e){return o(e)})),T("no"),v("no"),S("no"),x("no")},variant:"outlined",children:["Sort By Average Review ",a]})]}),Object(w.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gridGap:"2rem",margin:"auto",width:"90%"},children:s&&s.map((function(e){return Object(w.jsx)(oe,{currentUser:i,product:e,products:s,setProducts:o,cartItems:j,setCartItems:l,updateCart:p},e.id)}))})]})},le=n(339),de=n(6),je=n(329);function pe(e){var t=e.products,n=Object(de.a)(le.a)((function(e){var t=e.theme;return Object(D.a)({position:"absolute",right:"170px",borderRadius:t.shape.borderRadius,backgroundColor:Object(je.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(je.a)(t.palette.common.white,.25)}},t.breakpoints.up("md"),{marginLeft:t.spacing(2),width:"15%"})})),r=t.map((function(e){return{label:e.name,id:e.id}}));var c=Object(h.g)();return Object(w.jsx)(n,{options:r,onSelect:function(e){var n=e.target.value&&function(e){var n;return null===(n=(t&&t.filter((function(t){return t.name===e})))[0])||void 0===n?void 0:n.id}(e.target.value);n&&c.push("/products/".concat(n))},sx:{width:500},renderInput:function(e){return Object(w.jsx)(p.a,Object(_.a)(Object(_.a)({},e),{},{label:"Search Products"}))}})}var be=n(349),he=n(356),Oe=n(360),xe=n(344),me=n(358),fe=n(359),ge=n(170),ve=n.n(ge),ye=n(169),Ce=n.n(ye),we=n(131),ke=n.n(we),Se=n(132),Ie=n.n(Se),_e=n(361),Ue=n(362),Te=n(357),Ne=n(171),Pe=n.n(Ne),De=n(25),Ae=n(369),Ee=n(373),Fe=n(372),ze=n(368),We=n(370),qe=n(371),Be=n(168),Le=n.n(Be),Re=n(167),Je=n.n(Re),Me=n(166),Ye=n.n(Me);function $e(e){var t=e.cartItems,n=e.setCartItems,r=(e.products,e.getProductDetails),c=e.updateCart,a=e.currentUser;return Object(w.jsx)(ze.a,{component:U.a,children:Object(w.jsxs)(Ae.a,{"aria-label":"simple table",children:[Object(w.jsx)(We.a,{children:Object(w.jsxs)(qe.a,{children:[Object(w.jsx)(Fe.a,{children:"Product"}),Object(w.jsx)(Fe.a,{children:"Price"}),Object(w.jsx)(Fe.a,{children:"Quantity"}),Object(w.jsx)(Fe.a,{children:"Total"}),Object(w.jsx)(Fe.a,{children:"Remove"})]})}),Object(w.jsx)(Ee.a,{children:t.sort((function(e,t){return e.product_id-t.product_id})).map((function(e){var i=r(e.product_id);return Object(w.jsx)(w.Fragment,{children:i[0]&&Object(w.jsxs)(qe.a,{children:[Object(w.jsx)(Fe.a,{component:"th",scope:"row",children:i[0].name}),Object(w.jsxs)(Fe.a,{children:["$",i[0].price,".00"]}),Object(w.jsxs)(Fe.a,{style:{display:"flex",justifyContent:"space-between",textAlign:"center",height:"100%"},children:[Object(w.jsx)(Te.a,{style:{width:"20%"},children:Object(w.jsx)(Ye.a,{fontSize:"small",onClick:function(){return function(e){var t={user_id:a.id,product_id:e.id,quantity:1};fetch("/api/product_instances/update",{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).then((function(){return c(t)}))}(i[0])}})}),Object(w.jsx)("p",{style:{width:"20%",alignSelf:"center"},children:e.quantity}),Object(w.jsx)(Te.a,{style:{width:"20%"},children:Object(w.jsx)(Je.a,{onClick:function(){return function(e){var t={user_id:a.id,product_id:e.id,quantity:1};fetch("/api/product_instances",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(){return c(t)}))}(i[0])}})})]}),Object(w.jsxs)(Fe.a,{children:["$",i[0].price*e.quantity,".00"]}),Object(w.jsx)(Fe.a,{children:Object(w.jsx)(Te.a,{onClick:function(){fetch("/api/product_instances/".concat(e.id),{method:"DELETE"}).then((function(r){if(r.ok){var c=t.filter((function(t){return t.id!==e.id}));n(c)}}))},id:e.id,value:e,"aria-label":"delete",children:Object(w.jsx)(Le.a,{sx:{color:"red"}})})})]})})}))})]})})}function He(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var r="#";for(t=0;t<3;t+=1){r+="00".concat((n>>8*t&255).toString(16)).substr(-2)}return r}Object(de.a)(De.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(D.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function Ge(e){var t=e.currentUser,n=e.setCurrentUser,c=e.cartItems,a=e.products,i=e.cartTotal,o=e.setCartItems,j=e.updateCart,p=t?"block":"hidden";function b(e){return a&&a.filter((function(t){return e===t.id}))}var O=Object(h.g)(),m=r.useState({top:!1,left:!1,bottom:!1,right:!1}),f=Object(u.a)(m,2),v=f[0],y=f[1],C=function(e,t){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&y(Object(_.a)(Object(_.a)({},v),{},Object(D.a)({},e,t)))}};function k(){fetch("/api/logout",{method:"DELETE"}).then((function(e){e.ok&&(n(null),O.push("/log-in"))}))}function S(){fetch("/api/logout",{method:"DELETE"}).then((function(e){e.ok&&(n(null),O.push("/sign-up"))}))}var I,U;return Object(w.jsx)(x.a,{sx:{flexGrow:1},children:Object(w.jsx)(_e.a,{style:{width:"100vw",zIndex:"10",display:{showNav:p}},children:Object(w.jsxs)(Ue.a,{children:[Object(w.jsx)(l.a,Object(_.a)({},(U="".concat(t.first_name," ").concat(t.last_name),{sx:{bgcolor:He(U)},children:"".concat(U.split(" ")[0][0]).concat(U.split(" ")[1][0])}))),Object(w.jsx)(Te.a,{size:"large",edge:"end",color:"inherit","aria-label":"open drawer",sx:{mr:2},style:{padding:"20px"},children:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Pe.a,{variant:"outlined",style:{left:"5vw",top:"0px"},onClick:C("left",!0)}),Object(w.jsx)(be.a,{anchor:"left",open:v.left,onClose:C("left",!1),children:(I="left",Object(w.jsxs)(x.a,{sx:{width:"top"===I||"bottom"===I?"auto":250},role:"presentation",onClick:C(I,!1),onKeyDown:C(I,!1),children:[Object(w.jsxs)(he.a,{children:[Object(w.jsxs)(xe.a,{button:!0,component:s.b,to:"/products",children:[Object(w.jsx)(me.a,{children:Object(w.jsx)(Ce.a,{})}),Object(w.jsx)(fe.a,{primary:"Products"})]}),Object(w.jsxs)(xe.a,{button:!0,component:s.b,to:"/cart",children:[Object(w.jsx)(me.a,{children:Object(w.jsx)(ke.a,{})}),Object(w.jsx)(fe.a,{primary:"Cart"})]}),Object(w.jsxs)(xe.a,{button:!0,component:s.b,to:"/checkout",children:[Object(w.jsx)(me.a,{children:Object(w.jsx)(ve.a,{})}),Object(w.jsx)(fe.a,{primary:"Checkout"})]},"Checkout")]}),Object(w.jsx)(Oe.a,{}),Object(w.jsxs)(he.a,{children:[Object(w.jsxs)(xe.a,{button:!0,onClick:k,children:[Object(w.jsx)(me.a,{children:Object(w.jsx)(Ie.a,{})}),Object(w.jsx)(fe.a,{primary:"Sign Out"})]},"Sign Out"),Object(w.jsxs)(xe.a,{button:!0,onClick:S,children:[Object(w.jsx)(me.a,{children:Object(w.jsx)(Ie.a,{})}),Object(w.jsx)(fe.a,{primary:"Create Account"})]},"Sign Up")]})]}))})]})}),Object(w.jsx)(g.a,{children:"Dan's Store: A Place to Buy Things"}),Object(w.jsx)(pe,{products:a,style:{position:"absolute",right:"1px"}}),Object(w.jsxs)(Te.a,{size:"large",edge:"end",color:"inherit","aria-label":"open drawer",sx:{mr:2},style:{position:"absolute",right:"20px"},children:[i?"$".concat(i):"",Object(w.jsx)(ke.a,{onClick:C("right",!0)}),Object(w.jsx)(be.a,{anchor:"right",open:v.right,onClose:C("right",!1),children:function(e){return Object(w.jsxs)(x.a,{sx:{width:"top"===e||"bottom"===e?"auto":700},role:"presentation",children:[Object(w.jsx)(g.a,{textAlign:"center",style:{fontSize:"20px",padding:"10px"},children:i?"".concat(t.first_name,"'s Cart: Total ").concat(i):"".concat(t.first_name,"'s Cart: Empty")}),Object(w.jsx)($e,{cartItems:c,setCartItems:o,products:a,getProductDetails:b,updateCart:j,currentUser:t,style:{maxWidth:"100%",position:"absolute",top:"0px",left:"0px"}}),Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"20px"},children:[Object(w.jsx)(d.a,{variant:"outlined",onClick:function(){return O.push("/checkout")},children:"Checkout"}),Object(w.jsx)(d.a,{variant:"outlined",onClick:function(){return O.push("/cart")},children:"Open Cart"})]})]})}("right")})]})]})})})}var Ve=function(){var e=Object(h.g)();return setTimeout((function(){return e.push("/products")}),3e3),Object(w.jsx)("div",{children:"This is not a real store, be careful, the internet is a dangerous place. Redirecting to store."})};var Ke=function(e){var t=e.currentUser,n=e.products,c=e.cartItems,a=e.setCartItems,i=e.cartTotal,s=e.handleDelete,o=e.updateCart;Object(r.useEffect)((function(){fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return a(e.product_instances)}))}))}),[t,a]);var u=Object(h.g)();return Object(w.jsx)("div",{style:{display:"flex"},children:Object(w.jsxs)("div",{style:{textAlign:"center",marginTop:"80px",width:700,margin:"80px auto"},children:[i?Object(w.jsxs)("h1",{style:{},children:["Total $",i,".00"]}):null,Object(w.jsx)($e,{getProductDetails:function(e){return n.filter((function(t){return e===t.id}))},products:n,cartItems:c,setCartItems:a,handleDelete:s,updateCart:o,currentUser:t}),Object(w.jsx)(d.a,{style:{margin:"20px"},variant:"outlined",onClick:function(){return u.push("/checkout")},children:"Checkout"})]})})};n(258);var Qe=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(u.a)(a,2),s=i[0],l=i[1],d=Object(r.useState)([]),j=Object(u.a)(d,2),p=j[0],b=j[1],O=Object(r.useState)([]),x=Object(u.a)(O,2),m=x[0],f=x[1],g=Object(r.useState)(0),v=Object(u.a)(g,2),y=v[0],C=v[1];function k(e){return p.filter((function(t){return e===t.id}))}function S(e){var t;m.map((function(n){if(n.product_id===e.product_id)return t="fetch"})),"fetch"===t?fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return f(e.product_instances)}))})):f([].concat(Object(o.a)(m),[e]))}return Object(r.useEffect)((function(){n&&fetch("/api/products").then((function(e){return e.json()})).then((function(e){b(e)}))}),[n]),Object(r.useEffect)((function(){n&&p&&fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return f(e.product_instances)}))}))}),[]),Object(r.useEffect)((function(){fetch("/api/users").then((function(e){return e.json()})).then((function(e){return l(e)}))}),[]),Object(r.useEffect)((function(){fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){c(e)}))}))}),[]),Object(r.useEffect)((function(){var e,t=[];m.map((function(n){var r,c=k(n.product_id);return t.push((null===(r=c[0])||void 0===r?void 0:r.price)*n.quantity),e=t.reduce((function(e,t){return e+t}),0)})),C(e)}),[m,k]),n?n?Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(h.d,{children:[Object(w.jsxs)(h.b,{exact:!0,path:"/",children:[Object(w.jsx)(Ge,{setCurrentUser:c,cartItems:m,currentUser:n,setCartItems:f,products:p,cartTotal:y,updateCart:S}),Object(w.jsx)(h.a,{to:"/products",setProducts:b,products:p,currentUser:n})]}),Object(w.jsxs)(h.b,{exact:!0,path:"/home",children:[Object(w.jsx)(Ge,{setCurrentUser:c,cartItems:m,currentUser:n,setCartItems:f,products:p,cartTotal:y,updateCart:S}),Object(w.jsx)(K,{})]}),Object(w.jsx)(h.b,{exact:!0,path:"/sign-up",children:Object(w.jsx)(I,{currentUser:n,cartItems:m,setCurrentUser:c,setCartItems:f})}),Object(w.jsx)(h.b,{path:"/log-in",children:Object(w.jsx)(P,{currentUser:n,cartItems:m,setCurrentUser:c})}),Object(w.jsxs)(h.b,{exact:!0,path:"/products",children:[Object(w.jsx)(Ge,{setCurrentUser:c,cartItems:m,currentUser:n,setCartItems:f,products:p,cartTotal:y,updateCart:S}),Object(w.jsx)(ue,{products:p,currentUser:n,setProducts:b,cartItems:m,setCartItems:f,updateCart:S})]}),Object(w.jsxs)(h.b,{exact:!0,path:"/products/:product",children:[Object(w.jsx)(Ge,{setCurrentUser:c,cartItems:m,currentUser:n,setCartItems:f,products:p,updateCart:S,cartTotal:y}),Object(w.jsx)(ne,{currentUser:n,updateCart:S,setProducts:b,products:p,setCartItems:f,users:s})]}),Object(w.jsxs)(h.b,{exact:!0,path:"/cart",children:[Object(w.jsx)(Ge,{setCurrentUser:c,cartItems:m,currentUser:n,setCartItems:f,products:p,cartTotal:y,updateCart:S}),Object(w.jsx)(Ke,{products:p,cartItems:m,setCartItems:f,currentUser:n,cartTotal:y,handleDelete:function(e){f(m.filter((function(t){return t!==e})))},updateCart:S})]}),Object(w.jsx)(h.b,{exact:!0,path:"/checkout",children:Object(w.jsx)(Ve,{})})]})}):void 0:Object(w.jsxs)(h.d,{children:[Object(w.jsx)(h.b,{exact:!0,path:"/",children:Object(w.jsx)(h.a,{to:"/log-in",setProducts:b,products:p,currentUser:n})}),Object(w.jsx)(h.b,{exact:!0,path:"/sign-up",children:Object(w.jsx)(I,{currentUser:n,setCurrentUser:c})}),Object(w.jsx)(h.b,{path:"/log-in",children:Object(w.jsx)(P,{currentUser:n,setCurrentUser:c})})]})};i.a.render(Object(w.jsx)(s.a,{children:Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(Qe,{})})}),document.getElementById("root"))}},[[259,1,2]]]);
//# sourceMappingURL=main.42b05d34.chunk.js.map