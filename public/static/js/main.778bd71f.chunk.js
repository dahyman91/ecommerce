(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{245:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(35),i=n.n(a),s=n(29),o=n(14),l=n(11),u=n(326),d=n(328),j=n(313),h=n(319),b=n(332),p=n(19),O=n(327),m=n(334),x=n(98),f=n.n(x),g=n(331),v=n(333),y=n(163),C=n(330),w=n(1);function k(){return Object(w.jsxs)(g.a,{variant:"body2",color:"text.secondary",align:"center",children:["No Copyright \xa9 ",Object(w.jsx)(b.a,{color:"inherit",href:"https://www.linkedin.com/in/dan-hyman-dev/",children:"Dan Hyman"})," ",(new Date).getFullYear()]})}var S=Object(y.a)();function I(e){var t=e.setCurrentUser,n=(e.currentUser,Object(p.g)()),c=Object(r.useState)(""),a=Object(l.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(""),x=Object(l.a)(o,2),y=x[0],I=x[1],_=Object(r.useState)(""),U=Object(l.a)(_,2),T=U[0],N=U[1],P=Object(r.useState)(""),A=Object(l.a)(P,2),D=A[0],F=A[1],E=Object(r.useState)(""),z=Object(l.a)(E,2),L=(z[0],z[1]);return Object(w.jsx)(C.a,{theme:S,children:Object(w.jsxs)(v.a,{component:"main",maxWidth:"xs",children:[Object(w.jsx)(j.a,{}),Object(w.jsxs)(m.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(w.jsx)(u.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(w.jsx)(f.a,{})}),Object(w.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(w.jsxs)(m.a,{component:"form",noValidate:!0,onSubmit:function(e){e.preventDefault(),fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:i,last_name:y,email:T,password:D})}).then((function(e){e.ok?(console.log(e),t({first_name:i,last_name:y,email:T,password:D}),n.push("/products")):e.json().then((function(e){return L(Object.entries(e.error).flat())}))}))},sx:{mt:3},children:[Object(w.jsxs)(O.a,{container:!0,spacing:2,children:[Object(w.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(h.a,{onChange:function(e){return s(e.target.value)},value:i,autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),Object(w.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(h.a,{onChange:function(e){return I(e.target.value)},value:y,required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name"})}),Object(w.jsx)(O.a,{item:!0,xs:12,children:Object(w.jsx)(h.a,{onChange:function(e){return N(e.target.value)},value:T,required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(w.jsx)(O.a,{item:!0,xs:12,children:Object(w.jsx)(h.a,{onChange:function(e){return F(e.target.value)},value:D,required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})})]}),Object(w.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(w.jsx)(O.a,{container:!0,justifyContent:"center",children:Object(w.jsx)(O.a,{item:!0,children:Object(w.jsx)(b.a,{href:"/log-in",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(w.jsx)(k,{sx:{mt:5}})]})})}var _=n(38),U=n(335);function T(e){return Object(w.jsxs)(g.a,Object(_.a)(Object(_.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["No Copyright \xa9 ",Object(w.jsx)(b.a,{color:"inherit",href:"https://www.linkedin.com/in/dan-hyman-dev/",children:"Dan Hyman"})," ",(new Date).getFullYear()]}))}var N=Object(y.a)();function P(e){var t=e.setCurrentUser,n=(e.currentUser,Object(p.g)()),c=Object(r.useState)(""),a=Object(l.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(""),x=Object(l.a)(o,2),v=x[0],y=x[1],k=Object(r.useState)([]),S=Object(l.a)(k,2),I=(S[0],S[1]),_=Object(r.useState)(!1),P=Object(l.a)(_,2),A=(P[0],P[1]);return Object(w.jsx)(C.a,{theme:N,children:Object(w.jsxs)(O.a,{container:!0,component:"main",sx:{height:"100vh"},children:[Object(w.jsx)(j.a,{}),Object(w.jsx)(O.a,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://source.unsplash.com/random/?shoe)",backgroundRepeat:"no-repeat",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[50]:e.palette.grey[900]},backgroundSize:"cover",backgroundPosition:"center"}}),Object(w.jsx)(O.a,{item:!0,xs:12,sm:8,md:5,component:U.a,elevation:6,square:!0,children:Object(w.jsxs)(m.a,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(w.jsx)(u.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(w.jsx)(f.a,{})}),Object(w.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(w.jsxs)(m.a,{component:"form",noValidate:!0,onSubmit:function(e){e.preventDefault(),A(!0),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:v})}).then((function(e){A(!1),e.ok?e.json().then((function(e){t(e),n.push("/products")})):e.json().then((function(e){return I(e.errors)}))}))},sx:{mt:1},children:[Object(w.jsx)(h.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",onChange:function(e){return s(e.target.value)},value:i,name:"email",autoComplete:"email",autoFocus:!0}),Object(w.jsx)(h.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:v,onChange:function(e){return y(e.target.value)},autoComplete:"current-password"}),Object(w.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(w.jsx)(O.a,{container:!0,justifyContent:"center",children:Object(w.jsx)(O.a,{item:!0,children:Object(w.jsx)(b.a,{href:"/sign-up",variant:"body2",children:"Don't have an account? Sign Up"})})}),Object(w.jsx)(T,{sx:{mt:5}})]})]})})]})})}var A=n(6),D=n(4),F=n(317),E=n(318),z=n(324),L=n(155),B=n.n(L),W=n(154),q=n.n(W),R=n(151),J=n.n(R),M=n(152),$=n.n(M),H=n(153),Y=[{id:1,title:"Huarache",subtitle:"Gripp",image:"https://firebasestorage.googleapis.com/v0/b/mui-treasury.appspot.com/o/public%2Fshoes%2Fair-huarache-gripp.png?alt=media"},{id:2,title:"Air Max",subtitle:"270 P",image:"https://firebasestorage.googleapis.com/v0/b/mui-treasury.appspot.com/o/public%2Fshoes%2Fair-max-270.png?alt=media"},{id:3,title:"Air Max",subtitle:"Deluxe",image:"https://firebasestorage.googleapis.com/v0/b/mui-treasury.appspot.com/o/public%2Fshoes%2Fair-max-deluxe.png?alt=media"}],G=Object(F.a)((function(e){var t,n,r,c,a=e.palette,i=e.breakpoints,s=e.spacing;return{root:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -40%)",width:"70vw"},slide:(t={perspective:1e3,overflow:"hidden",position:"relative",paddingTop:s(8)},Object(A.a)(t,i.up("sm"),{paddingTop:s(10)}),Object(A.a)(t,i.up("md"),{paddingTop:s(14)}),t),imageContainer:{display:"block",position:"relative",zIndex:2,paddingBottom:"56.25%"},image:Object(A.a)({display:"block",position:"absolute",zIndex:10,width:"100%",height:"100%",objectFit:"cover",marginLeft:"12%"},i.up("sm"),{marginLeft:"4%"}),arrow:Object(A.a)({display:"none",position:"absolute",top:"50%",transform:"translateY(-50%)"},i.up("sm"),{display:"inline-flex"}),arrowLeft:Object(A.a)({left:0},i.up("lg"),{left:-64}),arrowRight:Object(A.a)({right:0},i.up("lg"),{right:-64}),text:(n={fontFamily:"Poppins, san-serif",fontWeight:900,position:"absolute",color:a.common.white,padding:"0 8px",transform:"rotateY(45deg)",lineHeight:1.2},Object(A.a)(n,i.up("sm"),{padding:"0 16px"}),Object(A.a)(n,i.up("md"),{padding:"0 24px"}),n),title:(r={top:20,left:"20%",height:"40%",fontSize:400,zIndex:1,background:"linear-gradient(0deg, rgba(255,255,255,0) 0%, #9c9c9c 100%)"},Object(A.a)(r,i.up("sm"),{top:40,fontSize:72}),Object(A.a)(r,i.up("md"),{top:52,fontSize:72}),r),subtitle:(c={top:60,left:"0%",height:"52%",fontSize:56,zIndex:2,background:"linear-gradient(0deg, rgba(255,255,255,0) 0%, #888888 100%)"},Object(A.a)(c,i.up("sm"),{top:112,left:"6%",fontSize:96}),Object(A.a)(c,i.up("md"),{top:128,fontSize:104}),c),indicatorContainer:{textAlign:"center"}}})),V=function(){var e=G();console.log(e);var t=Object(H.useArrowDarkButtonStyles)();console.log(t);var n=function(e,t){var n=e-t;return Math.abs(n)>1?{}:{transform:"rotateY(".concat(45*(1-n),"deg)")}};return Object(w.jsx)("div",{className:e.root,children:Object(w.jsx)(J.a,{renderElements:function(n){var r=n.index,c=n.onChangeIndex;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(z.a,{className:Object(D.default)(e.arrow,e.arrowLeft),classes:t,disabled:0===r,onClick:function(){return c(r-1)},children:Object(w.jsx)(q.a,{})}),Object(w.jsx)(z.a,{className:Object(D.default)(e.arrow,e.arrowRight),classes:t,disabled:r===Y.length-1,onClick:function(){return c(r+1)},children:Object(w.jsx)(B.a,{})}),Object(w.jsx)("div",{className:e.indicatorContainer,children:Y.map((function(e,t){var n=e.id;return Object(w.jsx)($.a,{active:t===r,onClick:function(){return c(t)}},n)}))})]})},children:function(t){var r=t.injectStyle,c=t.fineIndex;return Y.map((function(t,a){var i=t.id,s=t.title,o=t.subtitle,l=t.image;return Object(w.jsxs)("div",{className:e.slide,children:[Object(w.jsx)(E.a,{noWrap:!0,className:Object(D.default)(e.text,e.title),style:Object(_.a)(Object(_.a)({},r(a,60)),n(a,c)),children:s}),Object(w.jsx)(E.a,{noWrap:!0,className:Object(D.default)(e.text,e.subtitle),style:Object(_.a)(Object(_.a)({},r(a,40)),n(a,c)),children:o}),Object(w.jsx)("div",{className:e.imageContainer,children:Object(w.jsx)("img",{className:e.image,src:l,alt:"slide"})})]},i)}))}})})};var K=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(V,{})})},Q=n(83),X=n.p+"static/media/photo.c791112d.jpeg",Z=n(322),ee={fontFamily:"sans-serif",textAlign:"center",marginTop:"15vh",width:"100%",marginLeft:"15vw",display:"flex"},te={background:"white",borderRadius:"10px",position:"absolute",top:"70%",left:"50%",transform:"translate(-50%,-50%)"};var ne=function(e){var t=e.currentUser,n=e.updateCart,c=e.setCartItems,a=(e.products,e.users),i=Object(p.h)().product,s=Object(r.useState)({}),o=Object(l.a)(s,2),u=o[0],j=o[1];function h(e){return(a.length&&a.filter((function(t){return e===t.id})))[0].first_name}return console.log(u.average_review),Object(r.useEffect)((function(){fetch("/api/products/".concat(i)).then((function(e){return e.json()})).then((function(e){return j(e)}))}),[i]),Object(r.useEffect)((function(){u&&fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return c(e.product_instances)}))}))}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:Object(w.jsxs)("div",{style:ee,children:[Object(w.jsx)(Q.Parallax,{bgImage:u.primary_image,strength:500,style:{borderRadius:"10%"},children:Object(w.jsx)("div",{style:{height:500,width:"30vw"},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:u.name}),Object(w.jsxs)(d.a,{onClick:function(){return function(){var e={user_id:t.id,product_id:u.id,quantity:1};fetch("/api/product_instances",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(){return n(e)}))}()},style:te,variant:"outlined",children:["Add ",u.name," to Cart"]})]})})}),Object(w.jsxs)("div",{style:{marginLeft:"10vw",marginTop:"10%",width:"20vw"},children:[Object(w.jsx)("h2",{children:u.name}),u.average_review&&Object(w.jsx)(Z.a,{name:"simple-controlled",precision:.5,value:u.average_review,readOnly:!0}),Object(w.jsx)("p",{style:{marginTop:"30px"},children:"Description:"}),Object(w.jsx)("p",{style:{},children:u.description}),Object(w.jsx)("p",{style:{marginTop:"10px"},children:"Price:"}),Object(w.jsxs)("p",{style:{},children:["$",u.price]})]})]})}),Object(w.jsx)("div",{children:Object(w.jsx)("div",{style:{width:"100vw",marginTop:"5vh"},children:u.reviews&&u.reviews.map((function(e){return console.log(h(e.user_id)),Object(w.jsxs)("div",{style:{height:"5vh",width:"80vw",display:"flex",margin:"auto",justifyContent:"center",alignItems:"center"},children:[Object(w.jsxs)("p",{style:{},children:["Name: ",h(e.user_id)]}),Object(w.jsx)(Z.a,{name:"simple-controlled",precision:.5,value:e.rating,readOnly:!0}),e.content?Object(w.jsx)("p",{style:{},children:"review.content"}):Object(w.jsx)("p",{style:{}})]})}))})}),Object(w.jsxs)("div",{style:{fontFamily:"sans-serif",textAlign:"center",marginTop:"10vh",width:"auto",height:"100vh"},children:[Object(w.jsx)(Q.Parallax,{bgImage:[X],strength:400,renderLayer:function(e){return Object(w.jsxs)("div",{style:{width:"100%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:"1"},children:[Object(w.jsx)(d.a,{href:"/products",style:te,children:"Back To Store"}),Object(w.jsx)("div",{style:{position:"absolute",background:"rgba(255, 125, 0, ".concat(1.2*e,")"),left:"50%",top:"50%",borderRadius:"50%",transform:"translate(-50%,-50%)",width:300,height:300,zIndex:"-1"}})]})},children:Object(w.jsx)("div",{style:{height:500}})}),Object(w.jsx)(Q.Parallax,{strength:100,children:Object(w.jsx)(Q.Background,{className:"custom-bg",children:Object(w.jsx)("div",{style:{height:2e3,width:2e3,backgroundImage:"url('https://i.imgur.com/8CV5WAB.png')"}})})})]})]})},re=n(343),ce=n(346),ae=n(345),ie=n(344),se=n(347);function oe(e){var t=e.product,n=e.currentUser,c=e.updateCart,a=Object(r.useState)(parseFloat(t.average_review)),i=Object(l.a)(a,2),s=i[0],o=i[1],u=Object(r.useState)(!1),j=Object(l.a)(u,2),h=(j[0],j[1]);return Object(w.jsxs)(re.a,{sx:{maxWidth:345},children:[Object(w.jsx)(ie.a,{children:Object(w.jsxs)(b.a,{href:"/products/".concat(t.id),style:{textDecoration:"none"},variant:"body2",children:[Object(w.jsx)(ae.a,{component:"img",height:"140",image:null===t||void 0===t?void 0:t.primary_image,alt:"green iguana"}),Object(w.jsxs)(ce.a,{style:{textAlign:"center"},children:[Object(w.jsx)(Z.a,{name:"simple-controlled",precision:.5,value:s,onChange:function(e){return function(e,r){var c={user_id:n.id,product_id:t.id,rating:parseFloat(e.target.value),content:""};o(e.target.value),fetch("/api/reviews",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(c)}).then(h(!0))}(e)}}),Object(w.jsx)(g.a,{gutterBottom:!0,variant:"h5",component:"div",children:t.name}),Object(w.jsxs)(g.a,{variant:"body2",color:"text.secondary",children:["Category: ",t.category]}),Object(w.jsx)(g.a,{variant:"body2",color:"text.secondary",children:t.description}),Object(w.jsxs)(g.a,{variant:"h5",textAlign:"center",color:"text.secondary",children:["$",t.price]})]})]})}),Object(w.jsxs)(se.a,{style:{justifyContent:"space-around"},children:[Object(w.jsx)(d.a,{onClick:function(){return function(){var e={user_id:n.id,product_id:t.id,quantity:1};fetch("/api/product_instances",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(){return c(e)}))}()},size:"small",color:"primary",children:"Add To Cart"}),Object(w.jsx)(d.a,{href:"/products/".concat(t.id),size:"small",color:"primary",children:"Learn More"})]})]})}var le=function(e){var t,n,c,a,i=e.currentUser,s=e.products,o=e.setProducts,u=e.setCartItems,j=e.cartItems,h=e.updateCart,b=Object(r.useState)("no"),p=Object(l.a)(b,2),O=p[0],m=p[1],x=Object(r.useState)("no"),f=Object(l.a)(x,2),g=f[0],v=f[1],y=Object(r.useState)("no"),C=Object(l.a)(y,2),k=C[0],S=C[1],I=Object(r.useState)("no"),_=Object(l.a)(I,2),U=_[0],T=_[1];return Object(r.useEffect)((function(){i&&s&&fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return u(e.product_instances)}))}))}),[]),t="no"===O?"":"down"===O?"\u2b07\ufe0f":"\u2b06\ufe0f",n="no"===g?"":"down"===g?"\u2b07\ufe0f":"\u2b06\ufe0f",c="no"===k?"":"down"===k?"\u2b07\ufe0f":"\u2b06\ufe0f",a="no"===U?"":"down"===U?"\u2b07\ufe0f":"\u2b06\ufe0f",Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{style:{height:"90px"}}),Object(w.jsxs)("div",{className:"btnsContainer",style:{height:"40px",display:"flex",justifyContent:"space-around",marginBottom:"30px"},children:[Object(w.jsxs)(d.a,{onClick:function(){if("no"===O){var e=s.sort((function(e,t){return e.price-t.price}));o(e),m("down"),v("no"),S("no")}else if("down"===O){var t=s.sort((function(e,t){return t.price-e.price}));o(t),m("up"),v("no"),S("no")}else fetch("/api/products").then((function(e){return e.json()})).then((function(e){return o(e)})),m("no"),v("no"),S("no")},variant:"outlined",children:["Sort By Price ",t]}),Object(w.jsxs)(d.a,{onClick:function(){if("no"===g){var e=s.sort((function(e,t){return t.name.localeCompare(e.name)}));o(e),v("down"),m("no"),S("no")}else if("down"===g){var t=s.sort((function(e,t){return e.name.localeCompare(t.name)}));o(t),v("up"),m("no"),S("no")}else fetch("/api/products").then((function(e){return e.json()})).then((function(e){return o(e)})),v("no"),m("no"),S("no")},variant:"outlined",children:["Sort By Name ",n]}),Object(w.jsxs)(d.a,{onClick:function(){if("no"===k){var e=s.sort((function(e,t){return t.category.localeCompare(e.category)}));o(e),v("no"),m("no"),S("down")}else if("down"===k){var t=s.sort((function(e,t){return e.category.localeCompare(t.category)}));o(t),v("no"),m("no"),S("up")}else fetch("/api/products").then((function(e){return e.json()})).then((function(e){return o(e)})),v("no"),m("no"),S("no")},variant:"outlined",children:["Sort By Category ",c]}),Object(w.jsxs)(d.a,{onClick:function(){if("no"===U){var e=s.sort((function(e,t){return t.average_review-e.average_review}));o(e),T("down"),v("no"),m("no"),S("no")}else if("down"===U){var t=s.sort((function(e,t){return e.average_review-t.average_review}));o(t),T("up"),v("no"),S("no"),m("no")}else fetch("/api/products").then((function(e){return e.json()})).then((function(e){return o(e)})),T("no"),v("no"),S("no"),m("no")},variant:"outlined",children:["Sort By Average Review ",a]})]}),Object(w.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gridGap:"2rem",margin:"auto",width:"90%"},children:s&&s.map((function(e){return Object(w.jsx)(oe,{currentUser:i,product:e,products:s,setProducts:o,cartItems:j,setCartItems:u,updateCart:h},e.id)}))})]})},ue=n(329),de=n(336),je=n(340),he=n(323),be=n(338),pe=n(339),Oe=n(160),me=n.n(Oe),xe=n(159),fe=n.n(xe),ge=n(123),ve=n.n(ge),ye=n(124),Ce=n.n(ye),we=n(341),ke=n(342),Se=n(337),Ie=n(161),_e=n.n(Ie),Ue=n(5),Te=n(309),Ne=n(25),Pe=n(162),Ae=n.n(Pe),De=n(349),Fe=n(353),Ee=n(352),ze=n(348),Le=n(350),Be=n(351),We=n(158),qe=n.n(We),Re=n(157),Je=n.n(Re),Me=n(156),$e=n.n(Me);function He(e){var t=e.cartItems,n=e.setCartItems,r=(e.products,e.getProductDetails),c=e.updateCart,a=e.currentUser;return Object(w.jsx)(ze.a,{component:U.a,children:Object(w.jsxs)(De.a,{"aria-label":"simple table",children:[Object(w.jsx)(Le.a,{children:Object(w.jsxs)(Be.a,{children:[Object(w.jsx)(Ee.a,{children:"Product"}),Object(w.jsx)(Ee.a,{children:"Price"}),Object(w.jsx)(Ee.a,{children:"Quantity"}),Object(w.jsx)(Ee.a,{children:"Total"}),Object(w.jsx)(Ee.a,{children:"Remove"})]})}),Object(w.jsx)(Fe.a,{children:t.sort((function(e,t){return e.product_id-t.product_id})).map((function(e){var i=r(e.product_id);return Object(w.jsx)(w.Fragment,{children:i[0]&&Object(w.jsxs)(Be.a,{children:[Object(w.jsx)(Ee.a,{component:"th",scope:"row",children:i[0].name}),Object(w.jsxs)(Ee.a,{children:["$",i[0].price,".00"]}),Object(w.jsxs)(Ee.a,{style:{display:"flex",justifyContent:"space-between",textAlign:"center",height:"100%"},children:[Object(w.jsx)(Se.a,{style:{width:"20%"},children:Object(w.jsx)($e.a,{fontSize:"small",onClick:function(){return function(e){var t={user_id:a.id,product_id:e.id,quantity:1};fetch("/api/product_instances/update",{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).then((function(){return c(t)}))}(i[0])}})}),Object(w.jsx)("p",{style:{width:"20%",alignSelf:"center"},children:e.quantity}),Object(w.jsx)(Se.a,{style:{width:"20%"},children:Object(w.jsx)(Je.a,{onClick:function(){return function(e){var t={user_id:a.id,product_id:e.id,quantity:1};fetch("/api/product_instances",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(){return c(t)}))}(i[0])}})})]}),Object(w.jsxs)(Ee.a,{children:["$",i[0].price*e.quantity,".00"]}),Object(w.jsx)(Ee.a,{children:Object(w.jsx)(Se.a,{onClick:function(){fetch("/api/product_instances/".concat(e.id),{method:"DELETE"}).then((function(r){if(r.ok){var c=t.filter((function(t){return t.id!==e.id}));n(c)}}))},id:e.id,value:e,"aria-label":"delete",children:Object(w.jsx)(qe.a,{sx:{color:"red"}})})})]})})}))})]})})}var Ye=Object(Ue.a)("div")((function(e){var t=e.theme;return Object(A.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(Te.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(Te.a)(t.palette.common.white,.25)},marginLeft:0,width:"50%"},t.breakpoints.up("md"),{marginLeft:t.spacing(2),width:"auto"})}));function Ge(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var r="#";for(t=0;t<3;t+=1){r+="00".concat((n>>8*t&255).toString(16)).substr(-2)}return r}var Ve=Object(Ue.a)(Ne.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(A.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),Ke=Object(Ue.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}));function Qe(e){var t=e.currentUser,n=e.setCurrentUser,c=e.cartItems,a=e.products,i=e.cartTotal,o=e.setCartItems,j=e.updateCart,h=t?"block":"hidden";function b(e){return a&&a.filter((function(t){return e===t.id}))}var O=Object(p.g)(),x=r.useState({top:!1,left:!1,bottom:!1,right:!1}),f=Object(l.a)(x,2),v=f[0],y=f[1],C=function(e,t){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&y(Object(_.a)(Object(_.a)({},v),{},Object(A.a)({},e,t)))}};function k(){fetch("/api/logout",{method:"DELETE"}).then((function(e){e.ok&&(n(null),O.push("/log-in"))}))}var S,I;return Object(w.jsx)(m.a,{sx:{flexGrow:1},children:Object(w.jsx)(we.a,{style:{width:"100vw",zIndex:"10",display:{showNav:h}},children:Object(w.jsxs)(ke.a,{children:[Object(w.jsx)(u.a,Object(_.a)({},(I="".concat(t.first_name," ").concat(t.last_name),{sx:{bgcolor:Ge(I)},children:"".concat(I.split(" ")[0][0]).concat(I.split(" ")[1][0])}))),Object(w.jsx)(Se.a,{size:"large",edge:"end",color:"inherit","aria-label":"open drawer",sx:{mr:2},style:{padding:"20px"},children:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(_e.a,{variant:"outlined",style:{left:"5vw",top:"0px"},onClick:C("left",!0)}),Object(w.jsx)(ue.a,{anchor:"left",open:v.left,onClose:C("left",!1),children:(S="left",Object(w.jsxs)(m.a,{sx:{width:"top"===S||"bottom"===S?"auto":250},role:"presentation",onClick:C(S,!1),onKeyDown:C(S,!1),children:[Object(w.jsxs)(de.a,{children:[Object(w.jsxs)(he.a,{button:!0,component:s.b,to:"/products",children:[Object(w.jsx)(be.a,{children:Object(w.jsx)(fe.a,{})}),Object(w.jsx)(pe.a,{primary:"Products"})]}),Object(w.jsxs)(he.a,{button:!0,component:s.b,to:"/cart",children:[Object(w.jsx)(be.a,{children:Object(w.jsx)(ve.a,{})}),Object(w.jsx)(pe.a,{primary:"Cart"})]}),Object(w.jsxs)(he.a,{button:!0,component:s.b,to:"/checkout",children:[Object(w.jsx)(be.a,{children:Object(w.jsx)(me.a,{})}),Object(w.jsx)(pe.a,{primary:"Checkout"})]},"Checkout")]}),Object(w.jsx)(je.a,{}),Object(w.jsxs)(de.a,{children:[Object(w.jsxs)(he.a,{button:!0,onClick:k,children:[Object(w.jsx)(be.a,{children:Object(w.jsx)(Ce.a,{})}),Object(w.jsx)(pe.a,{primary:"Sign Out"})]},"Sign Out"),Object(w.jsxs)(he.a,{button:!0,onClick:k,children:[Object(w.jsx)(be.a,{children:Object(w.jsx)(Ce.a,{})}),Object(w.jsx)(pe.a,{primary:"Create Account"})]},"Sign Up")]})]}))})]})}),Object(w.jsx)(g.a,{children:"Dan's Store: A Place to Buy Things"}),Object(w.jsxs)(Ye,{style:{position:"absolute",right:"170px"},children:[Object(w.jsx)(Ke,{children:Object(w.jsx)(Ae.a,{})}),Object(w.jsx)(Ve,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]}),Object(w.jsxs)(Se.a,{size:"large",edge:"end",color:"inherit","aria-label":"open drawer",sx:{mr:2},style:{position:"absolute",right:"20px"},children:[i?"$".concat(i):"",Object(w.jsx)(ve.a,{onClick:C("right",!0)}),Object(w.jsx)(ue.a,{anchor:"right",open:v.right,onClose:C("right",!1),children:function(e){return Object(w.jsxs)(m.a,{sx:{width:"top"===e||"bottom"===e?"auto":700},role:"presentation",children:[Object(w.jsxs)(g.a,{textAlign:"center",children:[t.first_name,"'s Cart: ",i]}),Object(w.jsx)(He,{cartItems:c,setCartItems:o,products:a,getProductDetails:b,updateCart:j,currentUser:t,style:{maxWidth:"100%",position:"absolute",top:"0px",left:"0px"}}),Object(w.jsx)(d.a,{onClick:function(){return O.push("/checkout")},children:"Checkout"}),Object(w.jsx)(d.a,{onClick:function(){return O.push("/cart")},children:"Open Cart"})]})}("right")})]})]})})})}var Xe=function(){var e=Object(p.g)();return setTimeout((function(){return e.push("/products")}),3e3),Object(w.jsx)("div",{children:"This is not a real store, be careful, the internet is a dangerous place. Redirecting to store."})};var Ze=function(e){var t=e.currentUser,n=e.products,c=e.cartItems,a=e.setCartItems,i=e.cartTotal,s=e.handleDelete,o=e.updateCart;return Object(r.useEffect)((function(){fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return a(e.product_instances)}))}))}),[t,a]),Object(w.jsxs)("div",{style:{display:"flex"},children:[Object(w.jsx)("div",{style:{textAlign:"center",marginTop:"80px",width:700,marginLeft:"10vw"},children:Object(w.jsx)(He,{getProductDetails:function(e){return n.filter((function(t){return e===t.id}))},products:n,cartItems:c,setCartItems:a,handleDelete:s,updateCart:o,currentUser:t})}),Object(w.jsxs)("div",{style:{marginTop:"40vh",marginLeft:"35vw"},children:[Object(w.jsxs)("h1",{style:{},children:["Total $",i,".00"]}),Object(w.jsx)("h1",{children:"Checkout Button"})]})]})};n(245);var et=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(l.a)(a,2),s=i[0],u=i[1],d=Object(r.useState)([]),j=Object(l.a)(d,2),h=j[0],b=j[1],O=Object(r.useState)([]),m=Object(l.a)(O,2),x=m[0],f=m[1],g=Object(r.useState)(0),v=Object(l.a)(g,2),y=v[0],C=v[1];function k(e){return h.filter((function(t){return e===t.id}))}function S(e){var t;x.map((function(n){if(n.product_id===e.product_id)return t="fetch"})),"fetch"===t?fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return f(e.product_instances)}))})):f([].concat(Object(o.a)(x),[e]))}return Object(r.useEffect)((function(){n&&fetch("/api/products").then((function(e){return e.json()})).then((function(e){b(e)}))}),[n]),Object(r.useEffect)((function(){n&&h&&fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){return f(e.product_instances)}))}))}),[]),Object(r.useEffect)((function(){fetch("/api/users").then((function(e){return e.json()})).then((function(e){return u(e)}))}),[]),Object(r.useEffect)((function(){fetch("/api/me").then((function(e){e.ok&&e.json().then((function(e){c(e)}))}))}),[]),Object(r.useEffect)((function(){var e,t=[];x.map((function(n){var r,c=k(n.product_id);return t.push((null===(r=c[0])||void 0===r?void 0:r.price)*n.quantity),e=t.reduce((function(e,t){return e+t}),0)})),C(e)}),[x,k]),n?n?Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(p.d,{children:[Object(w.jsxs)(p.b,{exact:!0,path:"/",children:[Object(w.jsx)(Qe,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:h,cartTotal:y,updateCart:S}),Object(w.jsx)(p.a,{to:"/products",setProducts:b,products:h,currentUser:n})]}),Object(w.jsxs)(p.b,{exact:!0,path:"/home",children:[Object(w.jsx)(Qe,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:h,cartTotal:y,updateCart:S}),Object(w.jsx)(K,{})]}),Object(w.jsx)(p.b,{exact:!0,path:"/sign-up",children:Object(w.jsx)(I,{currentUser:n,cartItems:x,setCurrentUser:c,setCartItems:f})}),Object(w.jsx)(p.b,{path:"/log-in",children:Object(w.jsx)(P,{currentUser:n,cartItems:x,setCurrentUser:c})}),Object(w.jsxs)(p.b,{exact:!0,path:"/products",children:[Object(w.jsx)(Qe,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:h,cartTotal:y,updateCart:S}),Object(w.jsx)(le,{products:h,currentUser:n,setProducts:b,cartItems:x,setCartItems:f,updateCart:S})]}),Object(w.jsxs)(p.b,{exact:!0,path:"/products/:product",children:[Object(w.jsx)(Qe,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:h,updateCart:S,cartTotal:y}),Object(w.jsx)(ne,{currentUser:n,updateCart:S,setProducts:b,products:h,setCartItems:f,users:s})]}),Object(w.jsxs)(p.b,{exact:!0,path:"/cart",children:[Object(w.jsx)(Qe,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:h,cartTotal:y,updateCart:S}),Object(w.jsx)(Ze,{products:h,cartItems:x,setCartItems:f,currentUser:n,cartTotal:y,handleDelete:function(e){f(x.filter((function(t){return t!==e})))},updateCart:S})]}),Object(w.jsx)(p.b,{exact:!0,path:"/checkout",children:Object(w.jsx)(Xe,{})})]})}):void 0:Object(w.jsxs)(p.d,{children:[Object(w.jsx)(p.b,{exact:!0,path:"/",children:Object(w.jsx)(p.a,{to:"/log-in",setProducts:b,products:h,currentUser:n})}),Object(w.jsx)(p.b,{exact:!0,path:"/sign-up",children:Object(w.jsx)(I,{currentUser:n,setCurrentUser:c})}),Object(w.jsx)(p.b,{path:"/log-in",children:Object(w.jsx)(P,{currentUser:n,setCurrentUser:c})})]})};i.a.render(Object(w.jsx)(s.a,{children:Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(et,{})})}),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.778bd71f.chunk.js.map