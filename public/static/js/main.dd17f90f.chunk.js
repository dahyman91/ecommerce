(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{265:function(t,e,n){},266:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(39),i=n.n(a),s=n(26),o=n(14),u=n(11),l=n(353),d=n(355),j=n(339),p=n(347),h=n(359),b=n(18),O=n(354),m=n(361),x=n(107),f=n.n(x),g=n(358),v=n(360),y=n(173),C=n(357),w=n(1);function S(){return Object(w.jsxs)(g.a,{variant:"body2",color:"text.secondary",align:"center",children:["No Copyright \xa9 ",Object(w.jsx)(h.a,{color:"inherit",href:"https://www.linkedin.com/in/dan-hyman-dev/",children:"Dan Hyman"})," ",(new Date).getFullYear()]})}var k=Object(y.a)();function I(t){var e=t.setCurrentUser,n=(t.currentUser,Object(b.g)()),c=Object(r.useState)(""),a=Object(u.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(""),x=Object(u.a)(o,2),y=x[0],I=x[1],_=Object(r.useState)(""),U=Object(u.a)(_,2),T=U[0],N=U[1],P=Object(r.useState)(""),A=Object(u.a)(P,2),D=A[0],E=A[1],F=Object(r.useState)(""),z=Object(u.a)(F,2),L=(z[0],z[1]);return Object(w.jsx)(C.a,{theme:k,children:Object(w.jsxs)(v.a,{component:"main",maxWidth:"xs",children:[Object(w.jsx)(j.a,{}),Object(w.jsxs)(m.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(w.jsx)(l.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(w.jsx)(f.a,{})}),Object(w.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(w.jsxs)(m.a,{component:"form",noValidate:!0,onSubmit:function(t){t.preventDefault(),fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:i,last_name:y,email:T,password:D})}).then((function(t){t.ok?(console.log(t),e({first_name:i,last_name:y,email:T,password:D}),n.push("/products")):t.json().then((function(t){return L(Object.entries(t.error).flat())}))}))},sx:{mt:3},children:[Object(w.jsxs)(O.a,{container:!0,spacing:2,children:[Object(w.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(p.a,{onChange:function(t){return s(t.target.value)},value:i,autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),Object(w.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(w.jsx)(p.a,{onChange:function(t){return I(t.target.value)},value:y,required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name"})}),Object(w.jsx)(O.a,{item:!0,xs:12,children:Object(w.jsx)(p.a,{onChange:function(t){return N(t.target.value)},value:T,required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(w.jsx)(O.a,{item:!0,xs:12,children:Object(w.jsx)(p.a,{onChange:function(t){return E(t.target.value)},value:D,required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})})]}),Object(w.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(w.jsx)(O.a,{container:!0,justifyContent:"center",children:Object(w.jsx)(O.a,{item:!0,children:Object(w.jsx)(h.a,{href:"/log-in",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(w.jsx)(S,{sx:{mt:5}})]})})}var _=n(28),U=n(362);function T(t){return Object(w.jsxs)(g.a,Object(_.a)(Object(_.a)({variant:"body2",color:"text.secondary",align:"center"},t),{},{children:["No Copyright \xa9 ",Object(w.jsx)(h.a,{color:"inherit",href:"https://www.linkedin.com/in/dan-hyman-dev/",children:"Dan Hyman"})," ",(new Date).getFullYear()]}))}var N=Object(y.a)();function P(t){var e=t.setCurrentUser,n=(t.currentUser,Object(b.g)()),c=Object(r.useState)(""),a=Object(u.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(""),x=Object(u.a)(o,2),v=x[0],y=x[1],S=Object(r.useState)([]),k=Object(u.a)(S,2),I=k[0],_=(k[1],Object(r.useState)(!1)),P=Object(u.a)(_,2),A=(P[0],P[1]);console.log(I);return Object(w.jsx)(C.a,{theme:N,children:Object(w.jsxs)(O.a,{container:!0,component:"main",sx:{height:"100vh"},children:[Object(w.jsx)(j.a,{}),Object(w.jsx)(O.a,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://source.unsplash.com/random/?shoe)",backgroundRepeat:"no-repeat",backgroundColor:function(t){return"light"===t.palette.mode?t.palette.grey[50]:t.palette.grey[900]},backgroundSize:"cover",backgroundPosition:"center"}}),Object(w.jsx)(O.a,{item:!0,xs:12,sm:8,md:5,component:U.a,elevation:6,square:!0,children:Object(w.jsxs)(m.a,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(w.jsx)(l.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(w.jsx)(f.a,{})}),Object(w.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(w.jsxs)(m.a,{component:"form",noValidate:!0,onSubmit:function(t){t.preventDefault(),A(!0),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:v})}).then((function(t){A(!1),t.ok?t.json().then((function(t){e(t),n.push("/products")})):t.json().then((function(t){return console.log(t.errors)}))}))},sx:{mt:1},children:[Object(w.jsx)(p.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",onChange:function(t){return s(t.target.value)},value:i,name:"email",autoComplete:"email",autoFocus:!0}),Object(w.jsx)(p.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:v,onChange:function(t){return y(t.target.value)},autoComplete:"current-password"}),Object(w.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(w.jsx)(O.a,{container:!0,justifyContent:"center",children:Object(w.jsx)(O.a,{item:!0,children:Object(w.jsx)(h.a,{href:"/sign-up",variant:"body2",children:"Don't have an account? Sign Up"})})}),Object(w.jsx)(T,{sx:{mt:5}})]})]})})]})})}var A=n(3),D=n(5),E=n(344),F=n(345),z=n(352),L=n(165),W=n.n(L),B=n(164),q=n.n(B),R=n(161),J=n.n(R),Y=n(162),M=n.n(Y),$=n(163),H=[{id:1,title:"Huarache",subtitle:"Gripp",image:"https://firebasestorage.googleapis.com/v0/b/mui-treasury.appspot.com/o/public%2Fshoes%2Fair-huarache-gripp.png?alt=media"},{id:2,title:"Air Max",subtitle:"270 P",image:"https://firebasestorage.googleapis.com/v0/b/mui-treasury.appspot.com/o/public%2Fshoes%2Fair-max-270.png?alt=media"},{id:3,title:"Air Max",subtitle:"Deluxe",image:"https://firebasestorage.googleapis.com/v0/b/mui-treasury.appspot.com/o/public%2Fshoes%2Fair-max-deluxe.png?alt=media"}],G=Object(E.a)((function(t){var e,n,r,c,a=t.palette,i=t.breakpoints,s=t.spacing;return{root:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -40%)",width:"70vw"},slide:(e={perspective:1e3,overflow:"hidden",position:"relative",paddingTop:s(8)},Object(A.a)(e,i.up("sm"),{paddingTop:s(10)}),Object(A.a)(e,i.up("md"),{paddingTop:s(14)}),e),imageContainer:{display:"block",position:"relative",zIndex:2,paddingBottom:"56.25%"},image:Object(A.a)({display:"block",position:"absolute",zIndex:10,width:"100%",height:"100%",objectFit:"cover",marginLeft:"12%"},i.up("sm"),{marginLeft:"4%"}),arrow:Object(A.a)({display:"none",position:"absolute",top:"50%",transform:"translateY(-50%)"},i.up("sm"),{display:"inline-flex"}),arrowLeft:Object(A.a)({left:0},i.up("lg"),{left:-64}),arrowRight:Object(A.a)({right:0},i.up("lg"),{right:-64}),text:(n={fontFamily:"Poppins, san-serif",fontWeight:900,position:"absolute",color:a.common.white,padding:"0 8px",transform:"rotateY(45deg)",lineHeight:1.2},Object(A.a)(n,i.up("sm"),{padding:"0 16px"}),Object(A.a)(n,i.up("md"),{padding:"0 24px"}),n),title:(r={top:20,left:"20%",height:"40%",fontSize:400,zIndex:1,background:"linear-gradient(0deg, rgba(255,255,255,0) 0%, #9c9c9c 100%)"},Object(A.a)(r,i.up("sm"),{top:40,fontSize:72}),Object(A.a)(r,i.up("md"),{top:52,fontSize:72}),r),subtitle:(c={top:60,left:"0%",height:"52%",fontSize:56,zIndex:2,background:"linear-gradient(0deg, rgba(255,255,255,0) 0%, #888888 100%)"},Object(A.a)(c,i.up("sm"),{top:112,left:"6%",fontSize:96}),Object(A.a)(c,i.up("md"),{top:128,fontSize:104}),c),indicatorContainer:{textAlign:"center"}}})),K=function(){var t=G();console.log(t);var e=Object($.useArrowDarkButtonStyles)();console.log(e);var n=function(t,e){var n=t-e;return Math.abs(n)>1?{}:{transform:"rotateY(".concat(45*(1-n),"deg)")}};return Object(w.jsx)("div",{className:t.root,children:Object(w.jsx)(J.a,{renderElements:function(n){var r=n.index,c=n.onChangeIndex;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(z.a,{className:Object(D.default)(t.arrow,t.arrowLeft),classes:e,disabled:0===r,onClick:function(){return c(r-1)},children:Object(w.jsx)(q.a,{})}),Object(w.jsx)(z.a,{className:Object(D.default)(t.arrow,t.arrowRight),classes:e,disabled:r===H.length-1,onClick:function(){return c(r+1)},children:Object(w.jsx)(W.a,{})}),Object(w.jsx)("div",{className:t.indicatorContainer,children:H.map((function(t,e){var n=t.id;return Object(w.jsx)(M.a,{active:e===r,onClick:function(){return c(e)}},n)}))})]})},children:function(e){var r=e.injectStyle,c=e.fineIndex;return H.map((function(e,a){var i=e.id,s=e.title,o=e.subtitle,u=e.image;return Object(w.jsxs)("div",{className:t.slide,children:[Object(w.jsx)(F.a,{noWrap:!0,className:Object(D.default)(t.text,t.title),style:Object(_.a)(Object(_.a)({},r(a,60)),n(a,c)),children:s}),Object(w.jsx)(F.a,{noWrap:!0,className:Object(D.default)(t.text,t.subtitle),style:Object(_.a)(Object(_.a)({},r(a,40)),n(a,c)),children:o}),Object(w.jsx)("div",{className:t.imageContainer,children:Object(w.jsx)("img",{className:t.image,src:u,alt:"slide"})})]},i)}))}})})};var V=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(K,{})})},Q=n(90),X=n.p+"static/media/photo.c791112d.jpeg",Z=n(350),tt={fontFamily:"sans-serif",textAlign:"center",marginTop:"15vh",width:"100%",marginLeft:"15vw",display:"flex"},et={background:"white",borderRadius:"10px",position:"absolute",top:"70%",left:"50%",transform:"translate(-50%,-50%)"};var nt=function(t){var e=t.currentUser,n=t.updateCart,c=t.setCartItems,a=(t.products,t.users),i=Object(b.h)().product,s=Object(r.useState)({}),o=Object(u.a)(s,2),l=o[0],j=o[1];function p(t){var e;return null===(e=(a.length&&a.filter((function(e){return t===e.id})))[0])||void 0===e?void 0:e.first_name}return Object(r.useEffect)((function(){fetch("/api/products/".concat(i)).then((function(t){return t.json()})).then((function(t){return j(t)}))}),[i]),Object(r.useEffect)((function(){l&&fetch("/api/me").then((function(t){t.ok&&t.json().then((function(t){return c(t.product_instances)}))}))}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:Object(w.jsxs)("div",{style:tt,children:[Object(w.jsx)(Q.Parallax,{bgImage:l.primary_image,strength:-200,style:{borderRadius:"10%"},children:Object(w.jsx)("div",{style:{height:500,width:"30vw"},children:Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:l.name}),Object(w.jsxs)(d.a,{onClick:function(){return function(){var t={user_id:e.id,product_id:l.id,quantity:1};fetch("/api/product_instances",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(){return n(t)}))}()},style:et,variant:"outlined",children:["Add ",l.name," to Cart"]})]})})}),Object(w.jsxs)("div",{style:{marginLeft:"10vw",marginTop:"10%",width:"20vw"},children:[Object(w.jsx)("h2",{children:l.name}),l.average_review>0?Object(w.jsx)(Z.a,{name:"simple-controlled",precision:.5,value:l.average_review,readOnly:!0}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Z.a,{value:0,readOnly:!0})," ",Object(w.jsx)("p",{children:"No Reviews Yet"})]}),Object(w.jsx)("p",{style:{marginTop:"30px"},children:"Description:"}),Object(w.jsx)("p",{style:{},children:l.description}),Object(w.jsx)("p",{style:{marginTop:"10px"},children:"Price:"}),Object(w.jsxs)("p",{style:{},children:["$",l.price]})]})]})}),Object(w.jsx)("div",{children:Object(w.jsx)("div",{style:{width:"100vw",marginTop:"5vh"},children:l.reviews&&l.reviews.map((function(t){return console.log(p(t.user_id)),Object(w.jsxs)("div",{style:{height:"5vh",width:"80vw",display:"flex",margin:"auto",justifyContent:"center",alignItems:"center"},children:[Object(w.jsx)("p",{style:{},children:p(t.user_id)}),Object(w.jsx)(Z.a,{name:"simple-controlled",precision:.5,value:t.rating,readOnly:!0}),t.content?Object(w.jsx)("p",{children:"review.content"}):Object(w.jsx)("p",{})]})}))})}),Object(w.jsxs)("div",{style:{fontFamily:"sans-serif",textAlign:"center",marginTop:"10vh",width:"auto",height:"100vh"},children:[Object(w.jsx)(Q.Parallax,{bgImage:[X],strength:400,renderLayer:function(t){return Object(w.jsxs)("div",{style:{width:"100%",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:"1"},children:[Object(w.jsx)(d.a,{href:"/products",style:et,children:"Back To Store"}),Object(w.jsx)("div",{style:{position:"absolute",background:"rgba(255, 125, 0, ".concat(1.2*t,")"),left:"50%",top:"50%",borderRadius:"50%",transform:"translate(-50%,-50%)",width:300,height:300,zIndex:"-1"}})]})},children:Object(w.jsx)("div",{style:{height:500}})}),Object(w.jsx)(Q.Parallax,{strength:100,children:Object(w.jsx)(Q.Background,{className:"custom-bg",children:Object(w.jsx)("div",{style:{height:2e3,width:2e3,backgroundImage:"url('https://i.imgur.com/8CV5WAB.png')"}})})})]})]})},rt=n(370),ct=n(373),at=n(372),it=n(371),st=n(374);function ot(t){var e=t.product,n=t.currentUser,c=t.updateCart,a=Object(r.useState)(parseFloat(e.average_review)),i=Object(u.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(!1),j=Object(u.a)(l,2),p=(j[0],j[1]);function b(t,e){return t.length<=e?t:t.slice(0,e)+"..."}return Object(w.jsxs)(rt.a,{sx:{maxWidth:345},children:[Object(w.jsx)(it.a,{children:Object(w.jsxs)(h.a,{href:"/products/".concat(e.id),style:{textDecoration:"none"},variant:"body2",children:[Object(w.jsx)(at.a,{component:"img",height:"140",image:null===e||void 0===e?void 0:e.primary_image,alt:"green iguana"}),Object(w.jsxs)(ct.a,{style:{textAlign:"center"},children:[Object(w.jsx)(Z.a,{name:"simple-controlled",precision:.5,value:s,onChange:function(t){return function(t,r){var c={user_id:n.id,product_id:e.id,rating:parseFloat(t.target.value),content:""};o(t.target.value),fetch("/api/reviews",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(c)}).then(p(!0))}(t)}}),Object(w.jsx)(g.a,{gutterBottom:!0,variant:"h5",component:"div",children:b(e.name,19)}),Object(w.jsxs)(g.a,{variant:"body2",color:"text.secondary",children:["Category: ",e.category]}),Object(w.jsx)(g.a,{variant:"body2",color:"text.secondary",children:b(e.description,50)}),Object(w.jsxs)(g.a,{variant:"h5",textAlign:"center",color:"text.secondary",children:["$",e.price]})]})]})}),Object(w.jsxs)(st.a,{style:{justifyContent:"space-around"},children:[Object(w.jsx)(d.a,{onClick:function(){return function(){var t={user_id:n.id,product_id:e.id,quantity:1};console.log(t),fetch("/api/product_instances",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(){return c(t)}))}()},size:"small",color:"primary",children:"Add To Cart"}),Object(w.jsx)(d.a,{href:"/products/".concat(e.id),size:"small",color:"primary",children:"Learn More"})]})]})}var ut=function(t){var e,n,c,a,i=t.currentUser,s=t.products,o=t.setProducts,l=t.setCartItems,j=t.cartItems,p=t.updateCart,h=Object(r.useState)("no"),b=Object(u.a)(h,2),O=b[0],m=b[1],x=Object(r.useState)("no"),f=Object(u.a)(x,2),g=f[0],v=f[1],y=Object(r.useState)("no"),C=Object(u.a)(y,2),S=C[0],k=C[1],I=Object(r.useState)("no"),_=Object(u.a)(I,2),U=_[0],T=_[1];return Object(r.useEffect)((function(){i&&s&&fetch("/api/me").then((function(t){t.ok&&t.json().then((function(t){return l(t.product_instances)}))}))}),[]),e="no"===O?"":"down"===O?"\u2b07\ufe0f":"\u2b06\ufe0f",n="no"===g?"":"down"===g?"\u2b07\ufe0f":"\u2b06\ufe0f",c="no"===S?"":"down"===S?"\u2b07\ufe0f":"\u2b06\ufe0f",a="no"===U?"":"down"===U?"\u2b07\ufe0f":"\u2b06\ufe0f",Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{style:{height:"90px"}}),Object(w.jsxs)("div",{className:"btnsContainer",style:{height:"40px",display:"flex",justifyContent:"space-around",marginBottom:"30px"},children:[Object(w.jsxs)(d.a,{onClick:function(){if("no"===O){var t=s.sort((function(t,e){return t.price-e.price}));o(t),m("down"),v("no"),k("no")}else if("down"===O){var e=s.sort((function(t,e){return e.price-t.price}));o(e),m("up"),v("no"),k("no")}else fetch("/api/products").then((function(t){return t.json()})).then((function(t){return o(t)})),m("no"),v("no"),k("no")},variant:"outlined",children:["Sort By Price ",e]}),Object(w.jsxs)(d.a,{onClick:function(){if("no"===g){var t=s.sort((function(t,e){return e.name.localeCompare(t.name)}));o(t),v("down"),m("no"),k("no")}else if("down"===g){var e=s.sort((function(t,e){return t.name.localeCompare(e.name)}));o(e),v("up"),m("no"),k("no")}else fetch("/api/products").then((function(t){return t.json()})).then((function(t){return o(t)})),v("no"),m("no"),k("no")},variant:"outlined",children:["Sort By Name ",n]}),Object(w.jsxs)(d.a,{onClick:function(){if("no"===S){var t=s.sort((function(t,e){return e.category.localeCompare(t.category)}));o(t),v("no"),m("no"),k("down")}else if("down"===S){var e=s.sort((function(t,e){return t.category.localeCompare(e.category)}));o(e),v("no"),m("no"),k("up")}else fetch("/api/products").then((function(t){return t.json()})).then((function(t){return o(t)})),v("no"),m("no"),k("no")},variant:"outlined",children:["Sort By Category ",c]}),Object(w.jsxs)(d.a,{onClick:function(){if("no"===U){var t=s.sort((function(t,e){return e.average_review-t.average_review}));o(t),T("down"),v("no"),m("no"),k("no")}else if("down"===U){var e=s.sort((function(t,e){return t.average_review-e.average_review}));o(e),T("up"),v("no"),k("no"),m("no")}else fetch("/api/products").then((function(t){return t.json()})).then((function(t){return o(t)})),T("no"),v("no"),k("no"),m("no")},variant:"outlined",children:["Sort By Average Review ",a]})]}),Object(w.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gridGap:"2rem",margin:"auto",width:"90%"},children:s&&s.map((function(t){return Object(w.jsx)(ot,{currentUser:i,product:t,products:s,setProducts:o,cartItems:j,setCartItems:l,updateCart:p},t.id)}))})]})},lt=n(346),dt=n(6),jt=n(336);function pt(t){var e=t.products,n=Object(dt.a)(lt.a)((function(t){var e=t.theme;return Object(A.a)({position:"absolute",right:"170px",borderRadius:e.shape.borderRadius,backgroundColor:Object(jt.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(jt.a)(e.palette.common.white,.25)}},e.breakpoints.up("md"),{marginLeft:e.spacing(2),width:"15%"})})),r=e.map((function(t){return{label:t.name,id:t.id}}));function c(t){var n;return null===(n=(e&&e.filter((function(e){return e.name===t})))[0])||void 0===n?void 0:n.id}var a=Object(b.g)();return Object(w.jsx)(n,{options:r,onSelect:function(t){var e=t.target.value&&c(t.target.value);e&&a.push("/products/".concat(e))},onSubmit:function(t){var e=t.target.value&&c(t.target.value);e&&a.push("/products/".concat(e))},onChange:function(t){var e=t.target.value&&c(t.target.value);e&&a.push("/products/".concat(e))},sx:{width:500},renderInput:function(t){return Object(w.jsx)(p.a,Object(_.a)(Object(_.a)({},t),{},{label:"Search Products"}))}})}var ht=n(356),bt=n(363),Ot=n(367),mt=n(351),xt=n(365),ft=n(366),gt=n(171),vt=n.n(gt),yt=n(170),Ct=n.n(yt),wt=n(131),St=n.n(wt),kt=n(132),It=n.n(kt),_t=n(368),Ut=n(369),Tt=n(364),Nt=n(172),Pt=n.n(Nt),At=n(25),Dt=n(376),Et=n(380),Ft=n(379),zt=n(375),Lt=n(377),Wt=n(378),Bt=n(168),qt=n.n(Bt),Rt=n(167),Jt=n.n(Rt),Yt=n(166),Mt=n.n(Yt);function $t(t){var e=t.cartItems,n=t.setCartItems,r=(t.products,t.getProductDetails),c=t.updateCart,a=t.currentUser;return Object(w.jsx)(zt.a,{component:U.a,children:Object(w.jsxs)(Dt.a,{"aria-label":"simple table",children:[Object(w.jsx)(Lt.a,{children:Object(w.jsxs)(Wt.a,{children:[Object(w.jsx)(Ft.a,{children:"Product"}),Object(w.jsx)(Ft.a,{children:"Price"}),Object(w.jsx)(Ft.a,{children:"Quantity"}),Object(w.jsx)(Ft.a,{children:"Total"}),Object(w.jsx)(Ft.a,{children:"Remove"})]})}),Object(w.jsx)(Et.a,{children:e.sort((function(t,e){return t.product_id-e.product_id})).map((function(t){var i=r(t.product_id);return Object(w.jsx)(w.Fragment,{children:i[0]&&Object(w.jsxs)(Wt.a,{children:[Object(w.jsx)(Ft.a,{component:"th",scope:"row",children:i[0].name}),Object(w.jsxs)(Ft.a,{children:["$",i[0].price,".00"]}),Object(w.jsxs)(Ft.a,{style:{display:"flex",justifyContent:"space-between",textAlign:"center",height:"100%"},children:[Object(w.jsx)(Tt.a,{style:{width:"20%"},children:Object(w.jsx)(Mt.a,{fontSize:"small",onClick:function(){return function(t){var e={user_id:a.id,product_id:t.id,quantity:1};fetch("/api/product_instances/update",{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(t){return console.log(t)})).then((function(){return c(e)}))}(i[0])}})}),Object(w.jsx)("p",{style:{width:"20%",alignSelf:"center"},children:t.quantity}),Object(w.jsx)(Tt.a,{style:{width:"20%"},children:Object(w.jsx)(Jt.a,{onClick:function(){return function(t){var e={user_id:a.id,product_id:t.id,quantity:1};fetch("/api/product_instances",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(){return c(e)}))}(i[0])}})})]}),Object(w.jsxs)(Ft.a,{children:["$",i[0].price*t.quantity,".00"]}),Object(w.jsx)(Ft.a,{children:Object(w.jsx)(Tt.a,{onClick:function(){fetch("/api/product_instances/".concat(t.id),{method:"DELETE"}).then((function(r){if(r.ok){var c=e.filter((function(e){return e.id!==t.id}));n(c)}}))},id:t.id,value:t,"aria-label":"delete",children:Object(w.jsx)(qt.a,{sx:{color:"red"}})})})]})})}))})]})})}var Ht=n(169),Gt=n.n(Ht);var Kt=function(t){var e=t.amount,n=t.testButton;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(Gt.a,{name:"Card # 424242424...",description:"Date needs to be in future, cvc can be anything.",image:"https://cdn.pixabay.com/photo/2014/06/03/19/38/road-sign-361514_1280.png",ComponentClass:"div",token:function(t){var n={token:t.id,email:t.email,amount:e};fetch("/api/charges",{method:"POST",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){console.log(e),alert("We are in business, ".concat(t.email))}))}))},panelLabel:"Give Money",stripeKey:"pk_test_51KO3LrKp7Mm0L1BeWPYYfAnCuY8Lj0UjEEcO9yW4JApMstsmnsCo6saVcPpoWvp0OvMzhzvHLY9pRpqGYgirIr1O00soISPK2e",amount:e,children:n})})};function Vt(t){var e,n=0;for(e=0;e<t.length;e+=1)n=t.charCodeAt(e)+((n<<5)-n);var r="#";for(e=0;e<3;e+=1){r+="00".concat((n>>8*e&255).toString(16)).substr(-2)}return r}Object(dt.a)(At.c)((function(t){var e=t.theme;return{color:"inherit","& .MuiInputBase-input":Object(A.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function Qt(t){var e=t.currentUser,n=t.setCurrentUser,c=t.cartItems,a=t.products,i=t.cartTotal,o=t.setCartItems,j=t.updateCart,p=e?"block":"hidden";function h(t){return a&&a.filter((function(e){return t===e.id}))}var O=Object(b.g)(),x=Object(w.jsx)(d.a,{variant:"outlined",children:"Checkout"}),f=r.useState({top:!1,left:!1,bottom:!1,right:!1}),v=Object(u.a)(f,2),y=v[0],C=v[1],S=function(t,e){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&C(Object(_.a)(Object(_.a)({},y),{},Object(A.a)({},t,e)))}};function k(){fetch("/api/logout",{method:"DELETE"}).then((function(t){t.ok&&(n(null),O.push("/log-in"))}))}function I(){fetch("/api/logout",{method:"DELETE"}).then((function(t){t.ok&&(n(null),O.push("/sign-up"))}))}var U,T;return Object(w.jsx)(m.a,{sx:{flexGrow:1},children:Object(w.jsx)(_t.a,{style:{width:"100vw",zIndex:"10",display:{showNav:p}},children:Object(w.jsxs)(Ut.a,{children:[Object(w.jsx)(l.a,Object(_.a)({},(T="".concat(e.first_name," ").concat(e.last_name),{sx:{bgcolor:Vt(T)},children:"".concat(T.split(" ")[0][0]).concat(T.split(" ")[1][0])}))),Object(w.jsx)(Tt.a,{size:"large",edge:"end",color:"inherit","aria-label":"open drawer",sx:{mr:2},style:{padding:"20px"},children:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Pt.a,{variant:"outlined",style:{left:"5vw",top:"0px"},onClick:S("left",!0)}),Object(w.jsx)(ht.a,{anchor:"left",open:y.left,onClose:S("left",!1),children:(U="left",Object(w.jsxs)(m.a,{sx:{width:"top"===U||"bottom"===U?"auto":250},role:"presentation",onClick:S(U,!1),onKeyDown:S(U,!1),children:[Object(w.jsxs)(bt.a,{children:[Object(w.jsxs)(mt.a,{button:!0,component:s.b,to:"/products",children:[Object(w.jsx)(xt.a,{children:Object(w.jsx)(Ct.a,{})}),Object(w.jsx)(ft.a,{primary:"Products"})]}),Object(w.jsxs)(mt.a,{button:!0,component:s.b,to:"/cart",children:[Object(w.jsx)(xt.a,{children:Object(w.jsx)(St.a,{})}),Object(w.jsx)(ft.a,{primary:"Cart"})]}),Object(w.jsxs)(mt.a,{button:!0,component:s.b,to:"/checkout",children:[Object(w.jsx)(xt.a,{children:Object(w.jsx)(vt.a,{})}),Object(w.jsx)(ft.a,{primary:"Checkout"})]},"Checkout")]}),Object(w.jsx)(Ot.a,{}),Object(w.jsxs)(bt.a,{children:[Object(w.jsxs)(mt.a,{button:!0,onClick:k,children:[Object(w.jsx)(xt.a,{children:Object(w.jsx)(It.a,{})}),Object(w.jsx)(ft.a,{primary:"Sign Out"})]},"Sign Out"),Object(w.jsxs)(mt.a,{button:!0,onClick:I,children:[Object(w.jsx)(xt.a,{children:Object(w.jsx)(It.a,{})}),Object(w.jsx)(ft.a,{primary:"Create Account"})]},"Sign Up")]})]}))})]})}),Object(w.jsx)(g.a,{children:"Dan's Store: A Place to Buy Things"}),Object(w.jsx)(pt,{products:a,style:{position:"absolute",right:"1px"}}),Object(w.jsxs)(Tt.a,{size:"large",edge:"end",color:"inherit","aria-label":"open drawer",sx:{mr:2},style:{position:"absolute",right:"20px"},children:[i?"$".concat(i):"",Object(w.jsx)(St.a,{onClick:S("right",!0)}),Object(w.jsx)(ht.a,{anchor:"right",open:y.right,onClose:S("right",!1),children:function(t){return Object(w.jsxs)(m.a,{sx:{width:"top"===t||"bottom"===t?"auto":700},role:"presentation",children:[Object(w.jsx)(g.a,{textAlign:"center",style:{fontSize:"20px",padding:"10px"},children:i?"".concat(e.first_name,"'s Cart: Total $").concat(i):"".concat(e.first_name,"'s Cart: Empty")}),Object(w.jsx)($t,{cartItems:c,setCartItems:o,products:a,getProductDetails:h,updateCart:j,currentUser:e,style:{maxWidth:"100%",position:"absolute",top:"0px",left:"0px"}}),Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"20px"},children:[Object(w.jsx)(Kt,{testButton:x,amount:100*i}),Object(w.jsx)(d.a,{variant:"outlined",onClick:function(){return O.push("/cart")},children:"Open Cart"})]})]})}("right")})]})]})})})}var Xt=function(){var t=Object(b.g)();return setTimeout((function(){return t.push("/products")}),3e3),Object(w.jsx)("div",{children:"This is not a real store, be careful, the internet is a dangerous place. Redirecting to store."})};var Zt=function(t){var e=t.currentUser,n=t.products,c=t.cartItems,a=t.setCartItems,i=t.cartTotal,s=t.handleDelete,o=t.updateCart;Object(r.useEffect)((function(){fetch("/api/me").then((function(t){t.ok&&t.json().then((function(t){return a(t.product_instances)}))}))}),[e,a]);var u=Object(b.g)();return Object(w.jsx)("div",{style:{display:"flex"},children:Object(w.jsxs)("div",{style:{textAlign:"center",marginTop:"80px",width:700,margin:"80px auto"},children:[i?Object(w.jsxs)("h1",{style:{},children:["Total $",i,".00"]}):null,Object(w.jsx)($t,{getProductDetails:function(t){return n.filter((function(e){return t===e.id}))},products:n,cartItems:c,setCartItems:a,handleDelete:s,updateCart:o,currentUser:e}),Object(w.jsx)(d.a,{style:{margin:"20px"},variant:"outlined",onClick:function(){return u.push("/checkout")},children:"Checkout"})]})})};n(265);var te=function(){var t=Object(r.useState)(null),e=Object(u.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)([]),i=Object(u.a)(a,2),s=i[0],l=i[1],d=Object(r.useState)([]),j=Object(u.a)(d,2),p=j[0],h=j[1],O=Object(r.useState)([]),m=Object(u.a)(O,2),x=m[0],f=m[1],g=Object(r.useState)(0),v=Object(u.a)(g,2),y=v[0],C=v[1];function S(t){return p.filter((function(e){return t===e.id}))}function k(t){var e;x.map((function(n){if(n.product_id===t.product_id)return e="fetch"})),"fetch"===e?fetch("/api/me").then((function(t){t.ok&&t.json().then((function(t){return f(t.product_instances)}))})):f([].concat(Object(o.a)(x),[t]))}return Object(r.useEffect)((function(){n&&fetch("/api/products").then((function(t){return t.json()})).then((function(t){h(t)}))}),[n]),Object(r.useEffect)((function(){n&&fetch("/api/me").then((function(t){t.ok&&t.json().then((function(t){return f(t.product_instances)}))}))}),[]),Object(r.useEffect)((function(){fetch("/api/users").then((function(t){return t.json()})).then((function(t){return l(t)}))}),[]),Object(r.useEffect)((function(){fetch("/api/me").then((function(t){t.ok&&t.json().then((function(t){c(t)}))}))}),[]),Object(r.useEffect)((function(){var t,e=[];x.map((function(n){var r,c=S(n.product_id);return e.push((null===(r=c[0])||void 0===r?void 0:r.price)*n.quantity),t=e.reduce((function(t,e){return t+e}),0)})),C(t)}),[x,S]),n?n?Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(b.d,{children:[Object(w.jsxs)(b.b,{exact:!0,path:"/",children:[Object(w.jsx)(Qt,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:p,cartTotal:y,updateCart:k}),Object(w.jsx)(b.a,{to:"/products",setProducts:h,products:p,currentUser:n})]}),Object(w.jsxs)(b.b,{exact:!0,path:"/home",children:[Object(w.jsx)(Qt,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:p,cartTotal:y,updateCart:k}),Object(w.jsx)(V,{})]}),Object(w.jsx)(b.b,{exact:!0,path:"/sign-up",children:Object(w.jsx)(I,{currentUser:n,cartItems:x,setCurrentUser:c,setCartItems:f})}),Object(w.jsx)(b.b,{path:"/log-in",children:Object(w.jsx)(P,{currentUser:n,cartItems:x,setCurrentUser:c})}),Object(w.jsxs)(b.b,{exact:!0,path:"/products",children:[Object(w.jsx)(Qt,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:p,cartTotal:y,updateCart:k}),Object(w.jsx)(ut,{products:p,currentUser:n,setProducts:h,cartItems:x,setCartItems:f,updateCart:k})]}),Object(w.jsxs)(b.b,{exact:!0,path:"/products/:product",children:[Object(w.jsx)(Qt,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:p,updateCart:k,cartTotal:y}),Object(w.jsx)(nt,{currentUser:n,updateCart:k,setProducts:h,products:p,setCartItems:f,users:s})]}),Object(w.jsxs)(b.b,{exact:!0,path:"/cart",children:[Object(w.jsx)(Qt,{setCurrentUser:c,cartItems:x,currentUser:n,setCartItems:f,products:p,cartTotal:y,updateCart:k}),Object(w.jsx)(Zt,{products:p,cartItems:x,setCartItems:f,currentUser:n,cartTotal:y,handleDelete:function(t){f(x.filter((function(e){return e!==t})))},updateCart:k})]}),Object(w.jsx)(b.b,{exact:!0,path:"/checkout",children:Object(w.jsx)(Xt,{})})]})}):void 0:Object(w.jsxs)(b.d,{children:[Object(w.jsx)(b.b,{exact:!0,path:"/",children:Object(w.jsx)(b.a,{to:"/log-in",setProducts:h,products:p,currentUser:n})}),Object(w.jsx)(b.b,{exact:!0,path:"/sign-up",children:Object(w.jsx)(I,{currentUser:n,setCurrentUser:c})}),Object(w.jsx)(b.b,{path:"/log-in",children:Object(w.jsx)(P,{currentUser:n,setCurrentUser:c})})]})};i.a.render(Object(w.jsx)(s.a,{children:Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(te,{})})}),document.getElementById("root"))}},[[266,1,2]]]);
//# sourceMappingURL=main.dd17f90f.chunk.js.map